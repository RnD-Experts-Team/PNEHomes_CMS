import{c as Ue,u as Xe,r as ye,j as s,H as $e}from"./app-wpqwjbtX.js";import{X as Fe,A as qe}from"./app-layout-DXFS_gc8.js";import{B as b}from"./app-logo-icon-lL51jTjN.js";import{I as d}from"./input-BJF06auV.js";import{L as n}from"./label-D_OYlgFh.js";import{S as Ve}from"./switch-Cm-heFoV.js";import{b as X,C as Ne,a as Se,c as $}from"./card-CgzcdBGG.js";import{I as o}from"./IdPickerButton-CQ-eLGHN.js";import{P as ze}from"./plus-Cvt80K6p.js";import{T as Je}from"./trash-2-BNmRtWD_.js";/* empty css            */import"./index-CDTu5uXC.js";import"./index-j3RQl5ey.js";import"./index-T61tjutk.js";const Ke=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Create Album",href:"#"}];function gs(){const e=Ue.c(134);let K;e[0]===Symbol.for("react.memo_cache_sentinel")?(K={title:"",cover_image_id:"",has_sub_albums:!1,order:0,is_active:!0,sub_albums:[],images:[]},e[0]=K):K=e[0];const{data:a,setData:l,post:Ce,processing:Q,errors:g}=Xe(K),[h,Oe]=ye.useState("real"),[_,Be]=ye.useState("real");let W;e[1]===Symbol.for("react.memo_cache_sentinel")?(W=[],e[1]=W):W=e[1];const[p,q]=ye.useState(W),[j,He]=ye.useState("real");let Y;e[2]!==Ce?(Y=i=>{i.preventDefault(),Ce("/admin/gallery-albums")},e[2]=Ce,e[3]=Y):Y=e[3];const we=Y;let Z;e[4]!==a.sub_albums||e[5]!==l?(Z=()=>{l("sub_albums",[...a.sub_albums,{title:"",cover_image_id:"",images:[]}]),q(Ye)},e[4]=a.sub_albums,e[5]=l,e[6]=Z):Z=e[6];const ke=Z;let ee;e[7]!==a.sub_albums||e[8]!==l?(ee=(i,t,r)=>{const m=[...a.sub_albums];m[i]={...m[i],[t]:r},l("sub_albums",m)},e[7]=a.sub_albums,e[8]=l,e[9]=ee):ee=e[9];const J=ee;let se;e[10]!==a.sub_albums||e[11]!==l?(se=i=>{l("sub_albums",a.sub_albums.filter((t,r)=>r!==i)),q(t=>t.filter((r,m)=>m!==i))},e[10]=a.sub_albums,e[11]=l,e[12]=se):se=e[12];const Ae=se;let ae;e[13]!==a.sub_albums||e[14]!==l?(ae=i=>{const t=[...a.sub_albums];t[i].images.push({virtual_image_id:"",real_image_id:""}),l("sub_albums",t)},e[13]=a.sub_albums,e[14]=l,e[15]=ae):ae=e[15];const Me=ae;let le;e[16]!==a.sub_albums||e[17]!==l||e[18]!==p?(le=(i,t)=>{if(!t.length)return;const r=p[i]??"real",m=[...a.sub_albums],c=t.map(u=>({virtual_image_id:r==="virtual"?u:"",real_image_id:r==="real"?u:""}));m[i].images=[...m[i].images,...c],l("sub_albums",m)},e[16]=a.sub_albums,e[17]=l,e[18]=p,e[19]=le):le=e[19];const Pe=le;let te;e[20]!==a.sub_albums||e[21]!==l?(te=(i,t,r,m)=>{const c=[...a.sub_albums];c[i].images[t][r]=m,l("sub_albums",c)},e[20]=a.sub_albums,e[21]=l,e[22]=te):te=e[22];const f=te;let ie;e[23]!==a.sub_albums||e[24]!==l?(ie=(i,t)=>{const r=[...a.sub_albums];r[i].images=r[i].images.filter((m,c)=>c!==t),l("sub_albums",r)},e[23]=a.sub_albums,e[24]=l,e[25]=ie):ie=e[25];const De=ie;let re;e[26]!==a.images||e[27]!==l?(re=()=>{l("images",[...a.images,{virtual_image_id:"",real_image_id:""}])},e[26]=a.images,e[27]=l,e[28]=re):re=e[28];const Te=re;let me;e[29]!==a.images||e[30]!==h||e[31]!==l?(me=i=>{if(!i.length)return;const t=i.map(r=>({virtual_image_id:h==="virtual"?r:"",real_image_id:h==="real"?r:""}));l("images",[...a.images,...t])},e[29]=a.images,e[30]=h,e[31]=l,e[32]=me):me=e[32];const Ie=me;let ce;e[33]!==a.images||e[34]!==l?(ce=(i,t,r)=>{const m=[...a.images];m[i][t]=r,l("images",m)},e[33]=a.images,e[34]=l,e[35]=ce):ce=e[35];const v=ce;let ne;e[36]!==a.images||e[37]!==l?(ne=i=>{l("images",a.images.filter((t,r)=>r!==i))},e[36]=a.images,e[37]=l,e[38]=ne):ne=e[38];const Re=ne;let ue;e[39]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx($e,{title:"Create Gallery Album"}),e[39]=ue):ue=e[39];let oe;e[40]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Create Gallery Album"})}),e[40]=oe):oe=e[40];let de;e[41]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Ne,{children:s.jsx(Se,{children:"Basic Information"})}),e[41]=de):de=e[41];let ge;e[42]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[42]=ge):ge=e[42];let y;e[43]!==l?(y=i=>l("title",i.target.value),e[43]=l,e[44]=y):y=e[44];let N;e[45]!==a.title||e[46]!==y?(N=s.jsx(d,{id:"title",value:a.title,onChange:y,placeholder:"Enter album title"}),e[45]=a.title,e[46]=y,e[47]=N):N=e[47];let S;e[48]!==g.title?(S=g.title&&s.jsx("p",{className:"text-sm text-destructive",children:g.title}),e[48]=g.title,e[49]=S):S=e[49];let be;e[50]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Slug will be auto-generated from title"}),e[50]=be):be=e[50];let C;e[51]!==N||e[52]!==S?(C=s.jsxs("div",{className:"space-y-2",children:[ge,N,S,be]}),e[51]=N,e[52]=S,e[53]=C):C=e[53];let he;e[54]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(n,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[54]=he):he=e[54];let w;e[55]!==l?(w=i=>l("cover_image_id",i.target.value),e[55]=l,e[56]=w):w=e[56];let k;e[57]!==a.cover_image_id||e[58]!==w?(k=s.jsx(d,{id:"cover_image_id",value:a.cover_image_id,onChange:w,placeholder:"Enter Google Drive file ID"}),e[57]=a.cover_image_id,e[58]=w,e[59]=k):k=e[59];let A;e[60]!==l?(A=s.jsx(o,{onPick:i=>l("cover_image_id",i)}),e[60]=l,e[61]=A):A=e[61];let M;e[62]!==k||e[63]!==A?(M=s.jsxs("div",{className:"flex gap-2",children:[k,A]}),e[62]=k,e[63]=A,e[64]=M):M=e[64];let P;e[65]!==g.cover_image_id?(P=g.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:g.cover_image_id}),e[65]=g.cover_image_id,e[66]=P):P=e[66];let D;e[67]!==M||e[68]!==P?(D=s.jsxs("div",{className:"space-y-2",children:[he,M,P]}),e[67]=M,e[68]=P,e[69]=D):D=e[69];let pe;e[70]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(n,{htmlFor:"order",children:"Order"}),e[70]=pe):pe=e[70];let T;e[71]!==l?(T=i=>l("order",parseInt(i.target.value)||0),e[71]=l,e[72]=T):T=e[72];let I;e[73]!==a.order||e[74]!==T?(I=s.jsxs("div",{className:"space-y-2",children:[pe,s.jsx(d,{id:"order",type:"number",value:a.order,onChange:T})]}),e[73]=a.order,e[74]=T,e[75]=I):I=e[75];let R;e[76]!==l?(R=i=>l("is_active",i),e[76]=l,e[77]=R):R=e[77];let G;e[78]!==a.is_active||e[79]!==R?(G=s.jsx(Ve,{id:"is_active",checked:a.is_active,onCheckedChange:R}),e[78]=a.is_active,e[79]=R,e[80]=G):G=e[80];let xe;e[81]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[81]=xe):xe=e[81];let z;e[82]!==G?(z=s.jsxs("div",{className:"flex items-center space-x-2",children:[G,xe]}),e[82]=G,e[83]=z):z=e[83];let E;e[84]!==I||e[85]!==z?(E=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I,z]}),e[84]=I,e[85]=z,e[86]=E):E=e[86];let F;e[87]!==a.sub_albums||e[88]!==l?(F=i=>{l("has_sub_albums",i),i?(l("images",[]),q(a.sub_albums.map(We))):(l("sub_albums",[]),q([]))},e[87]=a.sub_albums,e[88]=l,e[89]=F):F=e[89];let V;e[90]!==a.has_sub_albums||e[91]!==F?(V=s.jsx(Ve,{id:"has_sub_albums",checked:a.has_sub_albums,onCheckedChange:F}),e[90]=a.has_sub_albums,e[91]=F,e[92]=V):V=e[92];let _e;e[93]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(n,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[93]=_e):_e=e[93];let O;e[94]!==V?(O=s.jsxs("div",{className:"flex items-center space-x-2",children:[V,_e]}),e[94]=V,e[95]=O):O=e[95];let B;e[96]!==C||e[97]!==D||e[98]!==E||e[99]!==O?(B=s.jsxs(X,{children:[de,s.jsxs($,{className:"space-y-4",children:[C,D,E,O]})]}),e[96]=C,e[97]=D,e[98]=E,e[99]=O,e[100]=B):B=e[100];let H;e[101]!==ke||e[102]!==Me||e[103]!==Pe||e[104]!==a.has_sub_albums||e[105]!==a.sub_albums||e[106]!==Ae||e[107]!==De||e[108]!==l||e[109]!==p||e[110]!==j||e[111]!==J||e[112]!==f?(H=a.has_sub_albums&&s.jsxs(X,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Se,{children:"Sub-Albums"}),s.jsxs(b,{type:"button",onClick:ke,size:"sm",children:[s.jsx(ze,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx($,{className:"space-y-6",children:a.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):a.sub_albums.map((i,t)=>s.jsxs(X,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-base",children:["Sub-Album ",t+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ae(t),children:s.jsx(Je,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs($,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(d,{value:i.title,onChange:r=>J(t,"title",r.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.cover_image_id,onChange:r=>J(t,"cover_image_id",r.target.value),placeholder:"Google Drive file ID"}),s.jsx(o,{onPick:r=>J(t,"cover_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-2 py-1",children:[s.jsx(n,{className:"text-xs",children:"Multi →"}),s.jsxs("select",{className:"text-xs bg-transparent outline-none",value:p[t]??"real",onChange:r=>{const m=[...p];m[t]=r.target.value,q(m)},children:[s.jsx("option",{value:"real",children:"Real IDs"}),s.jsx("option",{value:"virtual",children:"Virtual IDs"})]})]}),s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>Pe(t,r)}),s.jsxs(b,{type:"button",variant:"outline",size:"sm",onClick:()=>Me(t),children:[s.jsx(ze,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),i.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:i.images.map((r,m)=>s.jsx(X,{children:s.jsxs($,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",m+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>De(t,m),children:s.jsx(Fe,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:r.virtual_image_id,onChange:c=>f(t,m,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:c=>f(t,m,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(d,{value:r.real_image_id,onChange:c=>f(t,m,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>f(t,m,"real_image_id",c)}),s.jsxs("div",{className:"flex items-center gap-1 rounded-md border px-2 py-1",children:[s.jsx(n,{className:"text-[10px]",children:"Multi →"}),s.jsxs("select",{className:"text-[10px] bg-transparent outline-none",value:j,onChange:c=>He(c.target.value),children:[s.jsx("option",{value:"real",children:"Real"}),s.jsx("option",{value:"virtual",children:"Virtual"})]})]}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:c=>{if(!c.length)return;const u=c[0],ve=c.slice(1),x=[...a.sub_albums];if(j==="real"?x[t].images[m].real_image_id=u:x[t].images[m].virtual_image_id=u,ve.length){const Le=ve.map(Ee=>({virtual_image_id:j==="virtual"?Ee:"",real_image_id:j==="real"?Ee:""}));x[t].images.splice(m+1,0,...Le)}l("sub_albums",x)}})]})]})]})},m))})]})]})]},t))})]}),e[101]=ke,e[102]=Me,e[103]=Pe,e[104]=a.has_sub_albums,e[105]=a.sub_albums,e[106]=Ae,e[107]=De,e[108]=l,e[109]=p,e[110]=j,e[111]=J,e[112]=f,e[113]=H):H=e[113];let L;e[114]!==Te||e[115]!==Ie||e[116]!==a.has_sub_albums||e[117]!==a.images||e[118]!==h||e[119]!==_||e[120]!==Re||e[121]!==l||e[122]!==v?(L=!a.has_sub_albums&&s.jsxs(X,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Se,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-2 py-1",children:[s.jsx(n,{className:"text-xs",children:"Multi →"}),s.jsxs("select",{className:"text-xs bg-transparent outline-none",value:h,onChange:i=>Oe(i.target.value),children:[s.jsx("option",{value:"real",children:"Real IDs"}),s.jsx("option",{value:"virtual",children:"Virtual IDs"})]})]}),s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Ie}),s.jsxs(b,{type:"button",onClick:Te,size:"sm",children:[s.jsx(ze,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx($,{className:"space-y-4",children:a.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):a.images.map((i,t)=>s.jsx(X,{children:s.jsxs($,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",t+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>Re(t),children:s.jsx(Fe,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.virtual_image_id,onChange:r=>v(t,"virtual_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:r=>v(t,"virtual_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(d,{value:i.real_image_id,onChange:r=>v(t,"real_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:r=>v(t,"real_image_id",r)}),s.jsxs("div",{className:"flex items-center gap-1 rounded-md border px-2 py-1",children:[s.jsx(n,{className:"text-[10px]",children:"Multi →"}),s.jsxs("select",{className:"text-[10px] bg-transparent outline-none",value:_,onChange:r=>Be(r.target.value),children:[s.jsx("option",{value:"real",children:"Real"}),s.jsx("option",{value:"virtual",children:"Virtual"})]})]}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>{if(!r.length)return;const m=r[0],c=r.slice(1),u=[...a.images];if(_==="real"?u[t].real_image_id=m:u[t].virtual_image_id=m,c.length){const ve=c.map(x=>({virtual_image_id:_==="virtual"?x:"",real_image_id:_==="real"?x:""}));u.splice(t+1,0,...ve)}l("images",u)}})]})]})]})},t))})]}),e[114]=Te,e[115]=Ie,e[116]=a.has_sub_albums,e[117]=a.images,e[118]=h,e[119]=_,e[120]=Re,e[121]=l,e[122]=v,e[123]=L):L=e[123];let je;e[124]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(b,{type:"button",variant:"outline",onClick:Qe,children:"Cancel"}),e[124]=je):je=e[124];const Ge=Q?"Creating...":"Create Album";let U;e[125]!==Q||e[126]!==Ge?(U=s.jsxs("div",{className:"flex justify-end gap-2",children:[je,s.jsx(b,{type:"submit",disabled:Q,children:Ge})]}),e[125]=Q,e[126]=Ge,e[127]=U):U=e[127];let fe;return e[128]!==we||e[129]!==B||e[130]!==H||e[131]!==L||e[132]!==U?(fe=s.jsxs(qe,{breadcrumbs:Ke,children:[ue,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[oe,s.jsxs("form",{onSubmit:we,className:"space-y-6",children:[B,H,L,U]})]})]}),e[128]=we,e[129]=B,e[130]=H,e[131]=L,e[132]=U,e[133]=fe):fe=e[133],fe}function Qe(){return window.history.back()}function We(){return"real"}function Ye(e){return[...e,"real"]}export{gs as default};

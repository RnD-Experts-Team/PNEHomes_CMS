import{c as ss,u as ls,r as Xe,j as s,H as as}from"./app-DG8A1jTv.js";import{X as qe,A as ts}from"./app-layout-BWwBoild.js";import{B as b}from"./app-logo-icon-Ckm5885K.js";import{I as d}from"./input-CaDIzDBk.js";import{L as u}from"./label-BPtoZNuR.js";import{S as Je}from"./switch-D-LMKmCz.js";import{b as J,C as Ne,a as Se,c as K}from"./card-BTIh-tkD.js";import{I as g}from"./IdPickerButton-jKDBxAO9.js";import{c as Ke,S as Qe,a as We,b as Ye,d as Ce}from"./select-DRiYWwD-.js";import{P as Ue}from"./plus-B1Ieu5-B.js";import{T as is}from"./trash-2-BbPlZyRH.js";/* empty css            */import"./index-DeZ7PuZj.js";import"./index-BF49ZChp.js";import"./index-T61tjutk.js";import"./check-CGGVTq9Y.js";function ks(ke){const e=ss.c(152),{album:c}=ke;let Y;e[0]===Symbol.for("react.memo_cache_sentinel")?(Y=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Edit Album",href:"#"}],e[0]=Y):Y=e[0];const Ze=Y,we=c.title||"",Ae=c.cover_image_id||"",Ie=c.has_sub_albums??!1,De=c.order||0,Pe=c.is_active??!0;let _;e[1]!==c.sub_albums?(_=c.sub_albums||[],e[1]=c.sub_albums,e[2]=_):_=e[2];let p;e[3]!==c.images?(p=c.images||[],e[3]=c.images,e[4]=p):p=e[4];let Z;e[5]!==we||e[6]!==Ae||e[7]!==Ie||e[8]!==De||e[9]!==Pe||e[10]!==_||e[11]!==p?(Z={title:we,cover_image_id:Ae,has_sub_albums:Ie,order:De,is_active:Pe,sub_albums:_,images:p},e[5]=we,e[6]=Ae,e[7]=Ie,e[8]=De,e[9]=Pe,e[10]=_,e[11]=p,e[12]=Z):Z=e[12];const{data:l,setData:a,put:Me,processing:ee,errors:o}=ls(Z),[h,es]=Xe.useState("real");let j;e[13]!==c.sub_albums?(j=c.sub_albums||[],e[13]=c.sub_albums,e[14]=j):j=e[14];let se;e[15]!==j?(se=j.map(ns),e[15]=j,e[16]=se):se=e[16];const[x,Q]=Xe.useState(se);let le;e[17]!==c.id||e[18]!==Me?(le=t=>{t.preventDefault(),Me(`/admin/gallery-albums/${c.id}`)},e[17]=c.id,e[18]=Me,e[19]=le):le=e[19];const Te=le;let ae;e[20]!==l.sub_albums||e[21]!==a?(ae=()=>{a("sub_albums",[...l.sub_albums,{title:"",cover_image_id:"",images:[]}]),Q(cs)},e[20]=l.sub_albums,e[21]=a,e[22]=ae):ae=e[22];const Ee=ae;let te;e[23]!==l.sub_albums||e[24]!==a?(te=(t,i,m)=>{const r=[...l.sub_albums];r[t]={...r[t],[i]:m},a("sub_albums",r)},e[23]=l.sub_albums,e[24]=a,e[25]=te):te=e[25];const W=te;let ie;e[26]!==l.sub_albums||e[27]!==a?(ie=t=>{a("sub_albums",l.sub_albums.filter((i,m)=>m!==t)),Q(i=>i.filter((m,r)=>r!==t))},e[26]=l.sub_albums,e[27]=a,e[28]=ie):ie=e[28];const Ve=ie;let me;e[29]!==l.sub_albums||e[30]!==a?(me=t=>{const i=[...l.sub_albums];i[t].images.push({virtual_image_id:"",real_image_id:""}),a("sub_albums",i)},e[29]=l.sub_albums,e[30]=a,e[31]=me):me=e[31];const ze=me;let re;e[32]!==l.sub_albums||e[33]!==a||e[34]!==x?(re=(t,i)=>{if(!i.length)return;const m=x[t]??"real",r=[...l.sub_albums],n=i.map($e=>({virtual_image_id:m==="virtual"?$e:"",real_image_id:m==="real"?$e:""}));r[t].images=[...r[t].images,...n],a("sub_albums",r)},e[32]=l.sub_albums,e[33]=a,e[34]=x,e[35]=re):re=e[35];const Fe=re;let ce;e[36]!==l.sub_albums||e[37]!==a?(ce=(t,i,m,r)=>{const n=[...l.sub_albums];n[t].images[i][m]=r,a("sub_albums",n)},e[36]=l.sub_albums,e[37]=a,e[38]=ce):ce=e[38];const f=ce;let ne;e[39]!==l.sub_albums||e[40]!==a?(ne=(t,i)=>{const m=[...l.sub_albums];m[t].images=m[t].images.filter((r,n)=>n!==i),a("sub_albums",m)},e[39]=l.sub_albums,e[40]=a,e[41]=ne):ne=e[41];const Ge=ne;let ue;e[42]!==l.images||e[43]!==a?(ue=()=>{a("images",[...l.images,{virtual_image_id:"",real_image_id:""}])},e[42]=l.images,e[43]=a,e[44]=ue):ue=e[44];const Re=ue;let de;e[45]!==l.images||e[46]!==h||e[47]!==a?(de=t=>{if(!t.length)return;const i=t.map(m=>({virtual_image_id:h==="virtual"?m:"",real_image_id:h==="real"?m:""}));a("images",[...l.images,...i])},e[45]=l.images,e[46]=h,e[47]=a,e[48]=de):de=e[48];const Oe=de;let oe;e[49]!==l.images||e[50]!==a?(oe=(t,i,m)=>{const r=[...l.images];r[t][i]=m,a("images",r)},e[49]=l.images,e[50]=a,e[51]=oe):oe=e[51];const v=oe;let be;e[52]!==l.images||e[53]!==a?(be=t=>{a("images",l.images.filter((i,m)=>m!==t))},e[52]=l.images,e[53]=a,e[54]=be):be=e[54];const Be=be,He=`Edit Album - ${c.title}`;let y;e[55]!==He?(y=s.jsx(as,{title:He}),e[55]=He,e[56]=y):y=e[56];let ge;e[57]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Edit Gallery Album"})}),e[57]=ge):ge=e[57];let he;e[58]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Ne,{children:s.jsx(Se,{children:"Basic Information"})}),e[58]=he):he=e[58];let xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(u,{htmlFor:"title",children:"Title *"}),e[59]=xe):xe=e[59];let N;e[60]!==a?(N=t=>a("title",t.target.value),e[60]=a,e[61]=N):N=e[61];let S;e[62]!==l.title||e[63]!==N?(S=s.jsx(d,{id:"title",value:l.title,onChange:N,placeholder:"Enter album title"}),e[62]=l.title,e[63]=N,e[64]=S):S=e[64];let C;e[65]!==o.title?(C=o.title&&s.jsx("p",{className:"text-sm text-destructive",children:o.title}),e[65]=o.title,e[66]=C):C=e[66];let k;e[67]!==c.slug?(k=s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current slug: ",s.jsx("code",{children:c.slug})]}),e[67]=c.slug,e[68]=k):k=e[68];let w;e[69]!==S||e[70]!==C||e[71]!==k?(w=s.jsxs("div",{className:"space-y-2",children:[xe,S,C,k]}),e[69]=S,e[70]=C,e[71]=k,e[72]=w):w=e[72];let _e;e[73]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(u,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[73]=_e):_e=e[73];let A;e[74]!==a?(A=t=>a("cover_image_id",t.target.value),e[74]=a,e[75]=A):A=e[75];let I;e[76]!==l.cover_image_id||e[77]!==A?(I=s.jsx(d,{id:"cover_image_id",value:l.cover_image_id,onChange:A,placeholder:"Enter Google Drive file ID"}),e[76]=l.cover_image_id,e[77]=A,e[78]=I):I=e[78];let D;e[79]!==a?(D=s.jsx(g,{onPick:t=>a("cover_image_id",t)}),e[79]=a,e[80]=D):D=e[80];let P;e[81]!==I||e[82]!==D?(P=s.jsxs("div",{className:"flex gap-2",children:[I,D]}),e[81]=I,e[82]=D,e[83]=P):P=e[83];let M;e[84]!==o.cover_image_id?(M=o.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:o.cover_image_id}),e[84]=o.cover_image_id,e[85]=M):M=e[85];let T;e[86]!==P||e[87]!==M?(T=s.jsxs("div",{className:"space-y-2",children:[_e,P,M]}),e[86]=P,e[87]=M,e[88]=T):T=e[88];let pe;e[89]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(u,{htmlFor:"order",children:"Order"}),e[89]=pe):pe=e[89];let E;e[90]!==a?(E=t=>a("order",parseInt(t.target.value)||0),e[90]=a,e[91]=E):E=e[91];let V;e[92]!==l.order||e[93]!==E?(V=s.jsxs("div",{className:"space-y-2",children:[pe,s.jsx(d,{id:"order",type:"number",value:l.order,onChange:E})]}),e[92]=l.order,e[93]=E,e[94]=V):V=e[94];let z;e[95]!==a?(z=t=>a("is_active",t),e[95]=a,e[96]=z):z=e[96];let F;e[97]!==l.is_active||e[98]!==z?(F=s.jsx(Je,{id:"is_active",checked:l.is_active,onCheckedChange:z}),e[97]=l.is_active,e[98]=z,e[99]=F):F=e[99];let je;e[100]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(u,{htmlFor:"is_active",children:"Active"}),e[100]=je):je=e[100];let G;e[101]!==F?(G=s.jsxs("div",{className:"flex items-center space-x-2",children:[F,je]}),e[101]=F,e[102]=G):G=e[102];let R;e[103]!==V||e[104]!==G?(R=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V,G]}),e[103]=V,e[104]=G,e[105]=R):R=e[105];let O;e[106]!==l.sub_albums||e[107]!==a?(O=t=>{a("has_sub_albums",t),t?(a("images",[]),Q(l.sub_albums.map(rs))):(a("sub_albums",[]),Q([]))},e[106]=l.sub_albums,e[107]=a,e[108]=O):O=e[108];let B;e[109]!==l.has_sub_albums||e[110]!==O?(B=s.jsx(Je,{id:"has_sub_albums",checked:l.has_sub_albums,onCheckedChange:O}),e[109]=l.has_sub_albums,e[110]=O,e[111]=B):B=e[111];let fe;e[112]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(u,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[112]=fe):fe=e[112];let H;e[113]!==B?(H=s.jsxs("div",{className:"flex items-center space-x-2",children:[B,fe]}),e[113]=B,e[114]=H):H=e[114];let L;e[115]!==w||e[116]!==T||e[117]!==R||e[118]!==H?(L=s.jsxs(J,{children:[he,s.jsxs(K,{className:"space-y-4",children:[w,T,R,H]})]}),e[115]=w,e[116]=T,e[117]=R,e[118]=H,e[119]=L):L=e[119];let U;e[120]!==Ee||e[121]!==ze||e[122]!==Fe||e[123]!==l.has_sub_albums||e[124]!==l.sub_albums||e[125]!==Ve||e[126]!==Ge||e[127]!==x||e[128]!==W||e[129]!==f?(U=l.has_sub_albums&&s.jsxs(J,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Se,{children:"Sub-Albums"}),s.jsxs(b,{type:"button",onClick:Ee,size:"sm",children:[s.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(K,{className:"space-y-6",children:l.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):l.sub_albums.map((t,i)=>s.jsxs(J,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Se,{className:"text-base",children:["Sub-Album ",i+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ve(i),children:s.jsx(is,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(K,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Title *"}),s.jsx(d,{value:t.title,onChange:m=>W(i,"title",m.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:t.cover_image_id,onChange:m=>W(i,"cover_image_id",m.target.value),placeholder:"Google Drive file ID"}),s.jsx(g,{onPick:m=>W(i,"cover_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(u,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(Ke,{value:x[i]??"real",onValueChange:m=>{const r=[...x];r[i]=m,Q(r)},children:[s.jsx(Qe,{className:"h-8 text-xs",children:s.jsx(We,{placeholder:"Multi target"})}),s.jsxs(Ye,{children:[s.jsx(Ce,{value:"real",children:"Multi → Real IDs"}),s.jsx(Ce,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(g,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>Fe(i,m)}),s.jsxs(b,{type:"button",variant:"outline",size:"sm",onClick:()=>ze(i),children:[s.jsx(Ue,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),t.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:t.images.map((m,r)=>s.jsx(J,{children:s.jsxs(K,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",r+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ge(i,r),children:s.jsx(qe,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:m.virtual_image_id,onChange:n=>f(i,r,"virtual_image_id",n.target.value),placeholder:"Optional"}),s.jsx(g,{label:"Pick",onPick:n=>f(i,r,"virtual_image_id",n)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:m.real_image_id,onChange:n=>f(i,r,"real_image_id",n.target.value),placeholder:"Optional"}),s.jsx(g,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:n=>f(i,r,"real_image_id",n)})]})]})]})},r))})]})]})]},i))})]}),e[120]=Ee,e[121]=ze,e[122]=Fe,e[123]=l.has_sub_albums,e[124]=l.sub_albums,e[125]=Ve,e[126]=Ge,e[127]=x,e[128]=W,e[129]=f,e[130]=U):U=e[130];let $;e[131]!==Re||e[132]!==Oe||e[133]!==l.has_sub_albums||e[134]!==l.images||e[135]!==h||e[136]!==Be||e[137]!==v?($=!l.has_sub_albums&&s.jsxs(J,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Se,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(Ke,{value:h,onValueChange:t=>es(t),children:[s.jsx(Qe,{className:"h-8 text-xs",children:s.jsx(We,{placeholder:"Multi target"})}),s.jsxs(Ye,{children:[s.jsx(Ce,{value:"real",children:"Multi → Real IDs"}),s.jsx(Ce,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(g,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Oe}),s.jsxs(b,{type:"button",onClick:Re,size:"sm",children:[s.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(K,{className:"space-y-4",children:l.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):l.images.map((t,i)=>s.jsx(J,{children:s.jsxs(K,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",i+1]}),s.jsx(b,{type:"button",variant:"ghost",size:"sm",onClick:()=>Be(i),children:s.jsx(qe,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:t.virtual_image_id,onChange:m=>v(i,"virtual_image_id",m.target.value),placeholder:"Optional"}),s.jsx(g,{label:"Pick",onPick:m=>v(i,"virtual_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:t.real_image_id,onChange:m=>v(i,"real_image_id",m.target.value),placeholder:"Optional"}),s.jsx(g,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:m=>v(i,"real_image_id",m)})]})]})]})},i))})]}),e[131]=Re,e[132]=Oe,e[133]=l.has_sub_albums,e[134]=l.images,e[135]=h,e[136]=Be,e[137]=v,e[138]=$):$=e[138];let ve;e[139]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(b,{type:"button",variant:"outline",onClick:ms,children:"Cancel"}),e[139]=ve):ve=e[139];const Le=ee?"Updating...":"Update Album";let X;e[140]!==ee||e[141]!==Le?(X=s.jsxs("div",{className:"flex justify-end gap-2",children:[ve,s.jsx(b,{type:"submit",disabled:ee,children:Le})]}),e[140]=ee,e[141]=Le,e[142]=X):X=e[142];let q;e[143]!==Te||e[144]!==L||e[145]!==U||e[146]!==$||e[147]!==X?(q=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[ge,s.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[L,U,$,X]})]}),e[143]=Te,e[144]=L,e[145]=U,e[146]=$,e[147]=X,e[148]=q):q=e[148];let ye;return e[149]!==y||e[150]!==q?(ye=s.jsxs(ts,{breadcrumbs:Ze,children:[y,q]}),e[149]=y,e[150]=q,e[151]=ye):ye=e[151],ye}function ms(){return window.history.back()}function rs(){return"real"}function cs(ke){return[...ke,"real"]}function ns(){return"real"}export{ks as default};

import{c as Xe,u as qe,j as s,H as Je}from"./app-C95Nb1Q_.js";import{X as Le,A as Ke}from"./app-layout-qbG28cj0.js";import{B as _}from"./app-logo-icon-B4HqL7dN.js";import{I as g}from"./input-mZLmjWfC.js";import{L as u}from"./label-D-tZkR4P.js";import{S as Ue}from"./switch-zH2iGn6I.js";import{b as X,C as ve,a as ye,c as q}from"./card-rkRkmiO9.js";import{I as o}from"./IdPickerButton-C207G7mx.js";import{P as Re}from"./plus-Dxs5h83b.js";import{T as Qe}from"./trash-2-CPj9oMl4.js";/* empty css            */import"./index-DfNUVKm6.js";import"./index-Bhp2316M.js";import"./index-T61tjutk.js";function hs(d){const e=Xe.c(145),{album:n}=d;let Q;e[0]===Symbol.for("react.memo_cache_sentinel")?(Q=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Edit Album",href:"#"}],e[0]=Q):Q=e[0];const $e=Q,Ne=n.title||"",ke=n.cover_image_id||"",we=n.has_sub_albums??!1,Ce=n.order||0,Se=n.is_active??!0;let h;e[1]!==n.sub_albums?(h=n.sub_albums||[],e[1]=n.sub_albums,e[2]=h):h=e[2];let p;e[3]!==n.images?(p=n.images||[],e[3]=n.images,e[4]=p):p=e[4];let W;e[5]!==Ne||e[6]!==ke||e[7]!==we||e[8]!==Ce||e[9]!==Se||e[10]!==h||e[11]!==p?(W={title:Ne,cover_image_id:ke,has_sub_albums:we,order:Ce,is_active:Se,sub_albums:h,images:p},e[5]=Ne,e[6]=ke,e[7]=we,e[8]=Ce,e[9]=Se,e[10]=h,e[11]=p,e[12]=W):W=e[12];const{data:a,setData:l,put:Ae,processing:Y,errors:b}=qe(W);let Z;e[13]!==n.id||e[14]!==Ae?(Z=t=>{t.preventDefault(),Ae(`/admin/gallery-albums/${n.id}`)},e[13]=n.id,e[14]=Ae,e[15]=Z):Z=e[15];const Pe=Z;let ee;e[16]!==a.sub_albums||e[17]!==l?(ee=()=>{l("sub_albums",[...a.sub_albums,{title:"",cover_image_id:"",images:[]}])},e[16]=a.sub_albums,e[17]=l,e[18]=ee):ee=e[18];const Ie=ee;let se;e[19]!==a.sub_albums||e[20]!==l?(se=(t,i,m)=>{const c=[...a.sub_albums];c[t]={...c[t],[i]:m},l("sub_albums",c)},e[19]=a.sub_albums,e[20]=l,e[21]=se):se=e[21];const J=se;let ae;e[22]!==a.sub_albums||e[23]!==l?(ae=t=>{l("sub_albums",a.sub_albums.filter((i,m)=>m!==t))},e[22]=a.sub_albums,e[23]=l,e[24]=ae):ae=e[24];const De=ae;let le;e[25]!==a.sub_albums||e[26]!==l?(le=t=>{const i=[...a.sub_albums];i[t].images.push({virtual_image_id:"",real_image_id:""}),l("sub_albums",i)},e[25]=a.sub_albums,e[26]=l,e[27]=le):le=e[27];const Te=le;let te;e[28]!==a.sub_albums||e[29]!==l?(te=(t,i)=>{if(!i.length)return;const m=[...a.sub_albums],c=i.map(ss);m[t].images=[...m[t].images,...c],l("sub_albums",m)},e[28]=a.sub_albums,e[29]=l,e[30]=te):te=e[30];const Ee=te;let ie;e[31]!==a.sub_albums||e[32]!==l?(ie=(t,i,m,c)=>{const r=[...a.sub_albums];r[t].images[i][m]=c,l("sub_albums",r)},e[31]=a.sub_albums,e[32]=l,e[33]=ie):ie=e[33];const f=ie;let me;e[34]!==a.sub_albums||e[35]!==l?(me=(t,i)=>{const m=[...a.sub_albums];m[t].images=m[t].images.filter((c,r)=>r!==i),l("sub_albums",m)},e[34]=a.sub_albums,e[35]=l,e[36]=me):me=e[36];const Me=me;let ce;e[37]!==a.images||e[38]!==l?(ce=()=>{l("images",[...a.images,{virtual_image_id:"",real_image_id:""}])},e[37]=a.images,e[38]=l,e[39]=ce):ce=e[39];const ze=ce;let re;e[40]!==a.images||e[41]!==l?(re=t=>{if(!t.length)return;const i=t.map(es);l("images",[...a.images,...i])},e[40]=a.images,e[41]=l,e[42]=re):re=e[42];const Fe=re;let ne;e[43]!==a.images||e[44]!==l?(ne=(t,i,m)=>{const c=[...a.images];c[t][i]=m,l("images",c)},e[43]=a.images,e[44]=l,e[45]=ne):ne=e[45];const x=ne;let ue;e[46]!==a.images||e[47]!==l?(ue=t=>{l("images",a.images.filter((i,m)=>m!==t))},e[46]=a.images,e[47]=l,e[48]=ue):ue=e[48];const Ge=ue,Oe=`Edit Album - ${n.title}`;let j;e[49]!==Oe?(j=s.jsx(Je,{title:Oe}),e[49]=Oe,e[50]=j):j=e[50];let oe;e[51]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Edit Gallery Album"})}),e[51]=oe):oe=e[51];let de;e[52]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(ve,{children:s.jsx(ye,{children:"Basic Information"})}),e[52]=de):de=e[52];let ge;e[53]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(u,{htmlFor:"title",children:"Title *"}),e[53]=ge):ge=e[53];let v;e[54]!==l?(v=t=>l("title",t.target.value),e[54]=l,e[55]=v):v=e[55];let y;e[56]!==a.title||e[57]!==v?(y=s.jsx(g,{id:"title",value:a.title,onChange:v,placeholder:"Enter album title"}),e[56]=a.title,e[57]=v,e[58]=y):y=e[58];let N;e[59]!==b.title?(N=b.title&&s.jsx("p",{className:"text-sm text-destructive",children:b.title}),e[59]=b.title,e[60]=N):N=e[60];let k;e[61]!==n.slug?(k=s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current slug: ",s.jsx("code",{children:n.slug})]}),e[61]=n.slug,e[62]=k):k=e[62];let w;e[63]!==y||e[64]!==N||e[65]!==k?(w=s.jsxs("div",{className:"space-y-2",children:[ge,y,N,k]}),e[63]=y,e[64]=N,e[65]=k,e[66]=w):w=e[66];let be;e[67]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(u,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[67]=be):be=e[67];let C;e[68]!==l?(C=t=>l("cover_image_id",t.target.value),e[68]=l,e[69]=C):C=e[69];let S;e[70]!==a.cover_image_id||e[71]!==C?(S=s.jsx(g,{id:"cover_image_id",value:a.cover_image_id,onChange:C,placeholder:"Enter Google Drive file ID"}),e[70]=a.cover_image_id,e[71]=C,e[72]=S):S=e[72];let A;e[73]!==l?(A=s.jsx(o,{onPick:t=>l("cover_image_id",t)}),e[73]=l,e[74]=A):A=e[74];let P;e[75]!==S||e[76]!==A?(P=s.jsxs("div",{className:"flex gap-2",children:[S,A]}),e[75]=S,e[76]=A,e[77]=P):P=e[77];let I;e[78]!==b.cover_image_id?(I=b.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:b.cover_image_id}),e[78]=b.cover_image_id,e[79]=I):I=e[79];let D;e[80]!==P||e[81]!==I?(D=s.jsxs("div",{className:"space-y-2",children:[be,P,I]}),e[80]=P,e[81]=I,e[82]=D):D=e[82];let _e;e[83]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(u,{htmlFor:"order",children:"Order"}),e[83]=_e):_e=e[83];let T;e[84]!==l?(T=t=>l("order",parseInt(t.target.value)||0),e[84]=l,e[85]=T):T=e[85];let E;e[86]!==a.order||e[87]!==T?(E=s.jsxs("div",{className:"space-y-2",children:[_e,s.jsx(g,{id:"order",type:"number",value:a.order,onChange:T})]}),e[86]=a.order,e[87]=T,e[88]=E):E=e[88];let M;e[89]!==l?(M=t=>l("is_active",t),e[89]=l,e[90]=M):M=e[90];let z;e[91]!==a.is_active||e[92]!==M?(z=s.jsx(Ue,{id:"is_active",checked:a.is_active,onCheckedChange:M}),e[91]=a.is_active,e[92]=M,e[93]=z):z=e[93];let he;e[94]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(u,{htmlFor:"is_active",children:"Active"}),e[94]=he):he=e[94];let F;e[95]!==z?(F=s.jsxs("div",{className:"flex items-center space-x-2",children:[z,he]}),e[95]=z,e[96]=F):F=e[96];let G;e[97]!==E||e[98]!==F?(G=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E,F]}),e[97]=E,e[98]=F,e[99]=G):G=e[99];let O;e[100]!==l?(O=t=>{l("has_sub_albums",t),t?l("images",[]):l("sub_albums",[])},e[100]=l,e[101]=O):O=e[101];let B;e[102]!==a.has_sub_albums||e[103]!==O?(B=s.jsx(Ue,{id:"has_sub_albums",checked:a.has_sub_albums,onCheckedChange:O}),e[102]=a.has_sub_albums,e[103]=O,e[104]=B):B=e[104];let pe;e[105]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(u,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[105]=pe):pe=e[105];let H;e[106]!==B?(H=s.jsxs("div",{className:"flex items-center space-x-2",children:[B,pe]}),e[106]=B,e[107]=H):H=e[107];let R;e[108]!==w||e[109]!==D||e[110]!==G||e[111]!==H?(R=s.jsxs(X,{children:[de,s.jsxs(q,{className:"space-y-4",children:[w,D,G,H]})]}),e[108]=w,e[109]=D,e[110]=G,e[111]=H,e[112]=R):R=e[112];let L;e[113]!==Ie||e[114]!==Te||e[115]!==Ee||e[116]!==a.has_sub_albums||e[117]!==a.sub_albums||e[118]!==De||e[119]!==Me||e[120]!==l||e[121]!==J||e[122]!==f?(L=a.has_sub_albums&&s.jsxs(X,{children:[s.jsx(ve,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ye,{children:"Sub-Albums"}),s.jsxs(_,{type:"button",onClick:Ie,size:"sm",children:[s.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(q,{className:"space-y-6",children:a.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):a.sub_albums.map((t,i)=>s.jsxs(X,{children:[s.jsx(ve,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ye,{className:"text-base",children:["Sub-Album ",i+1]}),s.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>De(i),children:s.jsx(Qe,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Title *"}),s.jsx(g,{value:t.title,onChange:m=>J(i,"title",m.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:t.cover_image_id,onChange:m=>J(i,"cover_image_id",m.target.value),placeholder:"Google Drive file ID"}),s.jsx(o,{onPick:m=>J(i,"cover_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(u,{children:"Images"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>Ee(i,m)}),s.jsxs(_,{type:"button",variant:"outline",size:"sm",onClick:()=>Te(i),children:[s.jsx(Re,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),t.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:t.images.map((m,c)=>s.jsx(X,{children:s.jsxs(q,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",c+1]}),s.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>Me(i,c),children:s.jsx(Le,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:m.virtual_image_id,onChange:r=>f(i,c,"virtual_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:r=>f(i,c,"virtual_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:m.real_image_id,onChange:r=>f(i,c,"real_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:r=>f(i,c,"real_image_id",r)}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>{if(!r.length)return;const K=r[0],je=r.slice(1),He=[...a.sub_albums];if(He[i].images[c].real_image_id=K,je.length){const Ve=je.map(Ze);He[i].images.splice(c+1,0,...Ve)}l("sub_albums",He)}})]})]})]})},c))})]})]})]},i))})]}),e[113]=Ie,e[114]=Te,e[115]=Ee,e[116]=a.has_sub_albums,e[117]=a.sub_albums,e[118]=De,e[119]=Me,e[120]=l,e[121]=J,e[122]=f,e[123]=L):L=e[123];let U;e[124]!==ze||e[125]!==Fe||e[126]!==a.has_sub_albums||e[127]!==a.images||e[128]!==Ge||e[129]!==l||e[130]!==x?(U=!a.has_sub_albums&&s.jsxs(X,{children:[s.jsx(ve,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ye,{children:"Images"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Fe}),s.jsxs(_,{type:"button",onClick:ze,size:"sm",children:[s.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(q,{className:"space-y-4",children:a.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):a.images.map((t,i)=>s.jsx(X,{children:s.jsxs(q,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",i+1]}),s.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ge(i),children:s.jsx(Le,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:t.virtual_image_id,onChange:m=>x(i,"virtual_image_id",m.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:m=>x(i,"virtual_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:t.real_image_id,onChange:m=>x(i,"real_image_id",m.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:m=>x(i,"real_image_id",m)}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>{if(!m.length)return;const c=m[0],r=m.slice(1),K=[...a.images];if(K[i].real_image_id=c,r.length){const je=r.map(Ye);K.splice(i+1,0,...je)}l("images",K)}})]})]})]})},i))})]}),e[124]=ze,e[125]=Fe,e[126]=a.has_sub_albums,e[127]=a.images,e[128]=Ge,e[129]=l,e[130]=x,e[131]=U):U=e[131];let fe;e[132]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(_,{type:"button",variant:"outline",onClick:We,children:"Cancel"}),e[132]=fe):fe=e[132];const Be=Y?"Updating...":"Update Album";let $;e[133]!==Y||e[134]!==Be?($=s.jsxs("div",{className:"flex justify-end gap-2",children:[fe,s.jsx(_,{type:"submit",disabled:Y,children:Be})]}),e[133]=Y,e[134]=Be,e[135]=$):$=e[135];let V;e[136]!==Pe||e[137]!==R||e[138]!==L||e[139]!==U||e[140]!==$?(V=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[oe,s.jsxs("form",{onSubmit:Pe,className:"space-y-6",children:[R,L,U,$]})]}),e[136]=Pe,e[137]=R,e[138]=L,e[139]=U,e[140]=$,e[141]=V):V=e[141];let xe;return e[142]!==j||e[143]!==V?(xe=s.jsxs(Ke,{breadcrumbs:$e,children:[j,V]}),e[142]=j,e[143]=V,e[144]=xe):xe=e[144],xe}function We(){return window.history.back()}function Ye(d){return{virtual_image_id:"",real_image_id:d}}function Ze(d){return{virtual_image_id:"",real_image_id:d}}function es(d){return{virtual_image_id:"",real_image_id:d}}function ss(d){return{virtual_image_id:"",real_image_id:d}}export{hs as default};

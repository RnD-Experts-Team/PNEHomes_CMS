import{c as Ke,u as Qe,r as Ne,j as s,H as We}from"./app-CrEgBSrn.js";import{X as Le,A as Ye}from"./app-layout-DqqJg7BA.js";import{B as h}from"./app-logo-icon-p95bN-c3.js";import{I as d}from"./input-Cv2q0-x_.js";import{L as n}from"./label-D_P81yHQ.js";import{S as Ue}from"./switch-DsvjhCTz.js";import{b as $,C as Se,a as Ce,c as q}from"./card-ChT0Ldtg.js";import{I as o}from"./IdPickerButton-Cs5XD0hK.js";import{c as we,S as ke,a as Ae,b as Me,d as b}from"./select-By9NPwHH.js";import{P as Be}from"./plus-BE3_UyxM.js";import{T as Ze}from"./trash-2-D_4LWAve.js";/* empty css            */import"./index-CbwiTzWM.js";import"./index-D8QobsLW.js";import"./index-T61tjutk.js";import"./check-BMRT8nYA.js";const es=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Create Album",href:"#"}];function fs(){const e=Ke.c(134);let Q;e[0]===Symbol.for("react.memo_cache_sentinel")?(Q={title:"",cover_image_id:"",has_sub_albums:!1,order:0,is_active:!0,sub_albums:[],images:[]},e[0]=Q):Q=e[0];const{data:l,setData:a,post:Pe,processing:W,errors:g}=Qe(Q),[x,Xe]=Ne.useState("real"),[j,$e]=Ne.useState("real");let Y;e[1]===Symbol.for("react.memo_cache_sentinel")?(Y=[],e[1]=Y):Y=e[1];const[_,J]=Ne.useState(Y),[f,qe]=Ne.useState("real");let Z;e[2]!==Pe?(Z=i=>{i.preventDefault(),Pe("/admin/gallery-albums")},e[2]=Pe,e[3]=Z):Z=e[3];const Te=Z;let ee;e[4]!==l.sub_albums||e[5]!==a?(ee=()=>{a("sub_albums",[...l.sub_albums,{title:"",cover_image_id:"",images:[]}]),J(as)},e[4]=l.sub_albums,e[5]=a,e[6]=ee):ee=e[6];const De=ee;let se;e[7]!==l.sub_albums||e[8]!==a?(se=(i,t,r)=>{const m=[...l.sub_albums];m[i]={...m[i],[t]:r},a("sub_albums",m)},e[7]=l.sub_albums,e[8]=a,e[9]=se):se=e[9];const K=se;let le;e[10]!==l.sub_albums||e[11]!==a?(le=i=>{a("sub_albums",l.sub_albums.filter((t,r)=>r!==i)),J(t=>t.filter((r,m)=>m!==i))},e[10]=l.sub_albums,e[11]=a,e[12]=le):le=e[12];const Ie=le;let ae;e[13]!==l.sub_albums||e[14]!==a?(ae=i=>{const t=[...l.sub_albums];t[i].images.push({virtual_image_id:"",real_image_id:""}),a("sub_albums",t)},e[13]=l.sub_albums,e[14]=a,e[15]=ae):ae=e[15];const Re=ae;let te;e[16]!==l.sub_albums||e[17]!==a||e[18]!==_?(te=(i,t)=>{if(!t.length)return;const r=_[i]??"real",m=[...l.sub_albums],c=t.map(u=>({virtual_image_id:r==="virtual"?u:"",real_image_id:r==="real"?u:""}));m[i].images=[...m[i].images,...c],a("sub_albums",m)},e[16]=l.sub_albums,e[17]=a,e[18]=_,e[19]=te):te=e[19];const Ve=te;let ie;e[20]!==l.sub_albums||e[21]!==a?(ie=(i,t,r,m)=>{const c=[...l.sub_albums];c[i].images[t][r]=m,a("sub_albums",c)},e[20]=l.sub_albums,e[21]=a,e[22]=ie):ie=e[22];const v=ie;let re;e[23]!==l.sub_albums||e[24]!==a?(re=(i,t)=>{const r=[...l.sub_albums];r[i].images=r[i].images.filter((m,c)=>c!==t),a("sub_albums",r)},e[23]=l.sub_albums,e[24]=a,e[25]=re):re=e[25];const Ge=re;let me;e[26]!==l.images||e[27]!==a?(me=()=>{a("images",[...l.images,{virtual_image_id:"",real_image_id:""}])},e[26]=l.images,e[27]=a,e[28]=me):me=e[28];const ze=me;let ce;e[29]!==l.images||e[30]!==x||e[31]!==a?(ce=i=>{if(!i.length)return;const t=i.map(r=>({virtual_image_id:x==="virtual"?r:"",real_image_id:x==="real"?r:""}));a("images",[...l.images,...t])},e[29]=l.images,e[30]=x,e[31]=a,e[32]=ce):ce=e[32];const Ee=ce;let ne;e[33]!==l.images||e[34]!==a?(ne=(i,t,r)=>{const m=[...l.images];m[i][t]=r,a("images",m)},e[33]=l.images,e[34]=a,e[35]=ne):ne=e[35];const y=ne;let ue;e[36]!==l.images||e[37]!==a?(ue=i=>{a("images",l.images.filter((t,r)=>r!==i))},e[36]=l.images,e[37]=a,e[38]=ue):ue=e[38];const Fe=ue;let oe;e[39]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(We,{title:"Create Gallery Album"}),e[39]=oe):oe=e[39];let de;e[40]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Create Gallery Album"})}),e[40]=de):de=e[40];let ge;e[41]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(Se,{children:s.jsx(Ce,{children:"Basic Information"})}),e[41]=ge):ge=e[41];let he;e[42]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[42]=he):he=e[42];let N;e[43]!==a?(N=i=>a("title",i.target.value),e[43]=a,e[44]=N):N=e[44];let S;e[45]!==l.title||e[46]!==N?(S=s.jsx(d,{id:"title",value:l.title,onChange:N,placeholder:"Enter album title"}),e[45]=l.title,e[46]=N,e[47]=S):S=e[47];let C;e[48]!==g.title?(C=g.title&&s.jsx("p",{className:"text-sm text-destructive",children:g.title}),e[48]=g.title,e[49]=C):C=e[49];let be;e[50]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Slug will be auto-generated from title"}),e[50]=be):be=e[50];let w;e[51]!==S||e[52]!==C?(w=s.jsxs("div",{className:"space-y-2",children:[he,S,C,be]}),e[51]=S,e[52]=C,e[53]=w):w=e[53];let xe;e[54]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(n,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[54]=xe):xe=e[54];let k;e[55]!==a?(k=i=>a("cover_image_id",i.target.value),e[55]=a,e[56]=k):k=e[56];let A;e[57]!==l.cover_image_id||e[58]!==k?(A=s.jsx(d,{id:"cover_image_id",value:l.cover_image_id,onChange:k,placeholder:"Enter Google Drive file ID"}),e[57]=l.cover_image_id,e[58]=k,e[59]=A):A=e[59];let M;e[60]!==a?(M=s.jsx(o,{onPick:i=>a("cover_image_id",i)}),e[60]=a,e[61]=M):M=e[61];let P;e[62]!==A||e[63]!==M?(P=s.jsxs("div",{className:"flex gap-2",children:[A,M]}),e[62]=A,e[63]=M,e[64]=P):P=e[64];let T;e[65]!==g.cover_image_id?(T=g.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:g.cover_image_id}),e[65]=g.cover_image_id,e[66]=T):T=e[66];let D;e[67]!==P||e[68]!==T?(D=s.jsxs("div",{className:"space-y-2",children:[xe,P,T]}),e[67]=P,e[68]=T,e[69]=D):D=e[69];let _e;e[70]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(n,{htmlFor:"order",children:"Order"}),e[70]=_e):_e=e[70];let I;e[71]!==a?(I=i=>a("order",parseInt(i.target.value)||0),e[71]=a,e[72]=I):I=e[72];let R;e[73]!==l.order||e[74]!==I?(R=s.jsxs("div",{className:"space-y-2",children:[_e,s.jsx(d,{id:"order",type:"number",value:l.order,onChange:I})]}),e[73]=l.order,e[74]=I,e[75]=R):R=e[75];let V;e[76]!==a?(V=i=>a("is_active",i),e[76]=a,e[77]=V):V=e[77];let G;e[78]!==l.is_active||e[79]!==V?(G=s.jsx(Ue,{id:"is_active",checked:l.is_active,onCheckedChange:V}),e[78]=l.is_active,e[79]=V,e[80]=G):G=e[80];let pe;e[81]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[81]=pe):pe=e[81];let z;e[82]!==G?(z=s.jsxs("div",{className:"flex items-center space-x-2",children:[G,pe]}),e[82]=G,e[83]=z):z=e[83];let E;e[84]!==R||e[85]!==z?(E=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R,z]}),e[84]=R,e[85]=z,e[86]=E):E=e[86];let F;e[87]!==l.sub_albums||e[88]!==a?(F=i=>{a("has_sub_albums",i),i?(a("images",[]),J(l.sub_albums.map(ls))):(a("sub_albums",[]),J([]))},e[87]=l.sub_albums,e[88]=a,e[89]=F):F=e[89];let O;e[90]!==l.has_sub_albums||e[91]!==F?(O=s.jsx(Ue,{id:"has_sub_albums",checked:l.has_sub_albums,onCheckedChange:F}),e[90]=l.has_sub_albums,e[91]=F,e[92]=O):O=e[92];let je;e[93]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(n,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[93]=je):je=e[93];let B;e[94]!==O?(B=s.jsxs("div",{className:"flex items-center space-x-2",children:[O,je]}),e[94]=O,e[95]=B):B=e[95];let H;e[96]!==w||e[97]!==D||e[98]!==E||e[99]!==B?(H=s.jsxs($,{children:[ge,s.jsxs(q,{className:"space-y-4",children:[w,D,E,B]})]}),e[96]=w,e[97]=D,e[98]=E,e[99]=B,e[100]=H):H=e[100];let L;e[101]!==De||e[102]!==Re||e[103]!==Ve||e[104]!==l.has_sub_albums||e[105]!==l.sub_albums||e[106]!==Ie||e[107]!==Ge||e[108]!==a||e[109]!==_||e[110]!==f||e[111]!==K||e[112]!==v?(L=l.has_sub_albums&&s.jsxs($,{children:[s.jsx(Se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ce,{children:"Sub-Albums"}),s.jsxs(h,{type:"button",onClick:De,size:"sm",children:[s.jsx(Be,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(q,{className:"space-y-6",children:l.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):l.sub_albums.map((i,t)=>s.jsxs($,{children:[s.jsx(Se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ce,{className:"text-base",children:["Sub-Album ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ie(t),children:s.jsx(Ze,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(d,{value:i.title,onChange:r=>K(t,"title",r.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.cover_image_id,onChange:r=>K(t,"cover_image_id",r.target.value),placeholder:"Google Drive file ID"}),s.jsx(o,{onPick:r=>K(t,"cover_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(we,{value:_[t]??"real",onValueChange:r=>{const m=[..._];m[t]=r,J(m)},children:[s.jsx(ke,{className:"h-8 text-xs",children:s.jsx(Ae,{placeholder:"Multi target"})}),s.jsxs(Me,{children:[s.jsx(b,{value:"real",children:"Multi → Real IDs"}),s.jsx(b,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>Ve(t,r)}),s.jsxs(h,{type:"button",variant:"outline",size:"sm",onClick:()=>Re(t),children:[s.jsx(Be,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),i.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:i.images.map((r,m)=>s.jsx($,{children:s.jsxs(q,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",m+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ge(t,m),children:s.jsx(Le,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:r.virtual_image_id,onChange:c=>v(t,m,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:c=>v(t,m,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(d,{value:r.real_image_id,onChange:c=>v(t,m,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>v(t,m,"real_image_id",c)}),s.jsx("div",{className:"w-[120px]",children:s.jsxs(we,{value:f,onValueChange:c=>qe(c),children:[s.jsx(ke,{className:"h-8 text-[10px]",children:s.jsx(Ae,{})}),s.jsxs(Me,{children:[s.jsx(b,{value:"real",children:"Multi → Real"}),s.jsx(b,{value:"virtual",children:"Multi → Virtual"})]})]})}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:c=>{if(!c.length)return;const u=c[0],ye=c.slice(1),p=[...l.sub_albums];if(f==="real"?p[t].images[m].real_image_id=u:p[t].images[m].virtual_image_id=u,ye.length){const Je=ye.map(He=>({virtual_image_id:f==="virtual"?He:"",real_image_id:f==="real"?He:""}));p[t].images.splice(m+1,0,...Je)}a("sub_albums",p)}})]})]})]})},m))})]})]})]},t))})]}),e[101]=De,e[102]=Re,e[103]=Ve,e[104]=l.has_sub_albums,e[105]=l.sub_albums,e[106]=Ie,e[107]=Ge,e[108]=a,e[109]=_,e[110]=f,e[111]=K,e[112]=v,e[113]=L):L=e[113];let U;e[114]!==ze||e[115]!==Ee||e[116]!==l.has_sub_albums||e[117]!==l.images||e[118]!==x||e[119]!==j||e[120]!==Fe||e[121]!==a||e[122]!==y?(U=!l.has_sub_albums&&s.jsxs($,{children:[s.jsx(Se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ce,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(we,{value:x,onValueChange:i=>Xe(i),children:[s.jsx(ke,{className:"h-8 text-xs",children:s.jsx(Ae,{placeholder:"Multi target"})}),s.jsxs(Me,{children:[s.jsx(b,{value:"real",children:"Multi → Real IDs"}),s.jsx(b,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(o,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Ee}),s.jsxs(h,{type:"button",onClick:ze,size:"sm",children:[s.jsx(Be,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(q,{className:"space-y-4",children:l.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):l.images.map((i,t)=>s.jsx($,{children:s.jsxs(q,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Fe(t),children:s.jsx(Le,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.virtual_image_id,onChange:r=>y(t,"virtual_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",onPick:r=>y(t,"virtual_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(d,{value:i.real_image_id,onChange:r=>y(t,"real_image_id",r.target.value),placeholder:"Optional"}),s.jsx(o,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:r=>y(t,"real_image_id",r)}),s.jsx("div",{className:"w-[120px]",children:s.jsxs(we,{value:j,onValueChange:r=>$e(r),children:[s.jsx(ke,{className:"h-8 text-[10px]",children:s.jsx(Ae,{})}),s.jsxs(Me,{children:[s.jsx(b,{value:"real",children:"Multi → Real"}),s.jsx(b,{value:"virtual",children:"Multi → Virtual"})]})]})}),s.jsx(o,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>{if(!r.length)return;const m=r[0],c=r.slice(1),u=[...l.images];if(j==="real"?u[t].real_image_id=m:u[t].virtual_image_id=m,c.length){const ye=c.map(p=>({virtual_image_id:j==="virtual"?p:"",real_image_id:j==="real"?p:""}));u.splice(t+1,0,...ye)}a("images",u)}})]})]})]})},t))})]}),e[114]=ze,e[115]=Ee,e[116]=l.has_sub_albums,e[117]=l.images,e[118]=x,e[119]=j,e[120]=Fe,e[121]=a,e[122]=y,e[123]=U):U=e[123];let fe;e[124]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(h,{type:"button",variant:"outline",onClick:ss,children:"Cancel"}),e[124]=fe):fe=e[124];const Oe=W?"Creating...":"Create Album";let X;e[125]!==W||e[126]!==Oe?(X=s.jsxs("div",{className:"flex justify-end gap-2",children:[fe,s.jsx(h,{type:"submit",disabled:W,children:Oe})]}),e[125]=W,e[126]=Oe,e[127]=X):X=e[127];let ve;return e[128]!==Te||e[129]!==H||e[130]!==L||e[131]!==U||e[132]!==X?(ve=s.jsxs(Ye,{breadcrumbs:es,children:[oe,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[de,s.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[H,L,U,X]})]})]}),e[128]=Te,e[129]=H,e[130]=L,e[131]=U,e[132]=X,e[133]=ve):ve=e[133],ve}function ss(){return window.history.back()}function ls(){return"real"}function as(e){return[...e,"real"]}export{fs as default};

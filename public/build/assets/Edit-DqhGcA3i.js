import{c as us,u as ns,r as Me,j as s,H as os}from"./app-CrEgBSrn.js";import{X as ls,A as ds}from"./app-layout-DqqJg7BA.js";import{B as h}from"./app-logo-icon-p95bN-c3.js";import{I as g}from"./input-Cv2q0-x_.js";import{L as n}from"./label-D_P81yHQ.js";import{S as as}from"./switch-DsvjhCTz.js";import{b as Z,C as Pe,a as Te,c as ee}from"./card-ChT0Ldtg.js";import{I as d}from"./IdPickerButton-Cs5XD0hK.js";import{c as De,S as Ie,a as Re,b as Ve,d as x}from"./select-By9NPwHH.js";import{P as es}from"./plus-BE3_UyxM.js";import{T as gs}from"./trash-2-D_4LWAve.js";/* empty css            */import"./index-CbwiTzWM.js";import"./index-D8QobsLW.js";import"./index-T61tjutk.js";import"./check-BMRT8nYA.js";function Rs(Ee){const e=us.c(156),{album:u}=Ee;let ae;e[0]===Symbol.for("react.memo_cache_sentinel")?(ae=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Edit Album",href:"#"}],e[0]=ae):ae=e[0];const ts=ae,ze=u.title||"",Fe=u.cover_image_id||"",Ge=u.has_sub_albums??!1,Oe=u.order||0,Be=u.is_active??!0;let f;e[1]!==u.sub_albums?(f=u.sub_albums||[],e[1]=u.sub_albums,e[2]=f):f=e[2];let v;e[3]!==u.images?(v=u.images||[],e[3]=u.images,e[4]=v):v=e[4];let te;e[5]!==ze||e[6]!==Fe||e[7]!==Ge||e[8]!==Oe||e[9]!==Be||e[10]!==f||e[11]!==v?(te={title:ze,cover_image_id:Fe,has_sub_albums:Ge,order:Oe,is_active:Be,sub_albums:f,images:v},e[5]=ze,e[6]=Fe,e[7]=Ge,e[8]=Oe,e[9]=Be,e[10]=f,e[11]=v,e[12]=te):te=e[12];const{data:l,setData:a,put:He,processing:ie,errors:b}=ns(te),[_,is]=Me.useState("real"),[y,ms]=Me.useState("real");let N;e[13]!==u.sub_albums?(N=u.sub_albums||[],e[13]=u.sub_albums,e[14]=N):N=e[14];let me;e[15]!==N?(me=N.map(_s),e[15]=N,e[16]=me):me=e[16];const[p,se]=Me.useState(me),[S,rs]=Me.useState("real");let re;e[17]!==u.id||e[18]!==He?(re=i=>{i.preventDefault(),He(`/admin/gallery-albums/${u.id}`)},e[17]=u.id,e[18]=He,e[19]=re):re=e[19];const Le=re;let ce;e[20]!==l.sub_albums||e[21]!==a?(ce=()=>{a("sub_albums",[...l.sub_albums,{title:"",cover_image_id:"",images:[]}]),se(xs)},e[20]=l.sub_albums,e[21]=a,e[22]=ce):ce=e[22];const Ue=ce;let ue;e[23]!==l.sub_albums||e[24]!==a?(ue=(i,t,m)=>{const r=[...l.sub_albums];r[i]={...r[i],[t]:m},a("sub_albums",r)},e[23]=l.sub_albums,e[24]=a,e[25]=ue):ue=e[25];const le=ue;let ne;e[26]!==l.sub_albums||e[27]!==a?(ne=i=>{a("sub_albums",l.sub_albums.filter((t,m)=>m!==i)),se(t=>t.filter((m,r)=>r!==i))},e[26]=l.sub_albums,e[27]=a,e[28]=ne):ne=e[28];const $e=ne;let oe;e[29]!==l.sub_albums||e[30]!==a?(oe=i=>{const t=[...l.sub_albums];t[i].images.push({virtual_image_id:"",real_image_id:""}),a("sub_albums",t)},e[29]=l.sub_albums,e[30]=a,e[31]=oe):oe=e[31];const Xe=oe;let de;e[32]!==l.sub_albums||e[33]!==a||e[34]!==p?(de=(i,t)=>{if(!t.length)return;const m=p[i]??"real",r=[...l.sub_albums],c=t.map(o=>({virtual_image_id:m==="virtual"?o:"",real_image_id:m==="real"?o:""}));r[i].images=[...r[i].images,...c],a("sub_albums",r)},e[32]=l.sub_albums,e[33]=a,e[34]=p,e[35]=de):de=e[35];const qe=de;let ge;e[36]!==l.sub_albums||e[37]!==a?(ge=(i,t,m,r)=>{const c=[...l.sub_albums];c[i].images[t][m]=r,a("sub_albums",c)},e[36]=l.sub_albums,e[37]=a,e[38]=ge):ge=e[38];const w=ge;let be;e[39]!==l.sub_albums||e[40]!==a?(be=(i,t)=>{const m=[...l.sub_albums];m[i].images=m[i].images.filter((r,c)=>c!==t),a("sub_albums",m)},e[39]=l.sub_albums,e[40]=a,e[41]=be):be=e[41];const Je=be;let he;e[42]!==l.images||e[43]!==a?(he=()=>{a("images",[...l.images,{virtual_image_id:"",real_image_id:""}])},e[42]=l.images,e[43]=a,e[44]=he):he=e[44];const Ke=he;let xe;e[45]!==l.images||e[46]!==_||e[47]!==a?(xe=i=>{if(!i.length)return;const t=i.map(m=>({virtual_image_id:_==="virtual"?m:"",real_image_id:_==="real"?m:""}));a("images",[...l.images,...t])},e[45]=l.images,e[46]=_,e[47]=a,e[48]=xe):xe=e[48];const Qe=xe;let _e;e[49]!==l.images||e[50]!==a?(_e=(i,t,m)=>{const r=[...l.images];r[i][t]=m,a("images",r)},e[49]=l.images,e[50]=a,e[51]=_e):_e=e[51];const C=_e;let pe;e[52]!==l.images||e[53]!==a?(pe=i=>{a("images",l.images.filter((t,m)=>m!==i))},e[52]=l.images,e[53]=a,e[54]=pe):pe=e[54];const We=pe,Ye=`Edit Album - ${u.title}`;let k;e[55]!==Ye?(k=s.jsx(os,{title:Ye}),e[55]=Ye,e[56]=k):k=e[56];let je;e[57]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Edit Gallery Album"})}),e[57]=je):je=e[57];let fe;e[58]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(Pe,{children:s.jsx(Te,{children:"Basic Information"})}),e[58]=fe):fe=e[58];let ve;e[59]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[59]=ve):ve=e[59];let A;e[60]!==a?(A=i=>a("title",i.target.value),e[60]=a,e[61]=A):A=e[61];let M;e[62]!==l.title||e[63]!==A?(M=s.jsx(g,{id:"title",value:l.title,onChange:A,placeholder:"Enter album title"}),e[62]=l.title,e[63]=A,e[64]=M):M=e[64];let P;e[65]!==b.title?(P=b.title&&s.jsx("p",{className:"text-sm text-destructive",children:b.title}),e[65]=b.title,e[66]=P):P=e[66];let T;e[67]!==u.slug?(T=s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current slug: ",s.jsx("code",{children:u.slug})]}),e[67]=u.slug,e[68]=T):T=e[68];let D;e[69]!==M||e[70]!==P||e[71]!==T?(D=s.jsxs("div",{className:"space-y-2",children:[ve,M,P,T]}),e[69]=M,e[70]=P,e[71]=T,e[72]=D):D=e[72];let ye;e[73]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(n,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[73]=ye):ye=e[73];let I;e[74]!==a?(I=i=>a("cover_image_id",i.target.value),e[74]=a,e[75]=I):I=e[75];let R;e[76]!==l.cover_image_id||e[77]!==I?(R=s.jsx(g,{id:"cover_image_id",value:l.cover_image_id,onChange:I,placeholder:"Enter Google Drive file ID"}),e[76]=l.cover_image_id,e[77]=I,e[78]=R):R=e[78];let V;e[79]!==a?(V=s.jsx(d,{onPick:i=>a("cover_image_id",i)}),e[79]=a,e[80]=V):V=e[80];let E;e[81]!==R||e[82]!==V?(E=s.jsxs("div",{className:"flex gap-2",children:[R,V]}),e[81]=R,e[82]=V,e[83]=E):E=e[83];let z;e[84]!==b.cover_image_id?(z=b.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:b.cover_image_id}),e[84]=b.cover_image_id,e[85]=z):z=e[85];let F;e[86]!==E||e[87]!==z?(F=s.jsxs("div",{className:"space-y-2",children:[ye,E,z]}),e[86]=E,e[87]=z,e[88]=F):F=e[88];let Ne;e[89]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(n,{htmlFor:"order",children:"Order"}),e[89]=Ne):Ne=e[89];let G;e[90]!==a?(G=i=>a("order",parseInt(i.target.value)||0),e[90]=a,e[91]=G):G=e[91];let O;e[92]!==l.order||e[93]!==G?(O=s.jsxs("div",{className:"space-y-2",children:[Ne,s.jsx(g,{id:"order",type:"number",value:l.order,onChange:G})]}),e[92]=l.order,e[93]=G,e[94]=O):O=e[94];let B;e[95]!==a?(B=i=>a("is_active",i),e[95]=a,e[96]=B):B=e[96];let H;e[97]!==l.is_active||e[98]!==B?(H=s.jsx(as,{id:"is_active",checked:l.is_active,onCheckedChange:B}),e[97]=l.is_active,e[98]=B,e[99]=H):H=e[99];let Se;e[100]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[100]=Se):Se=e[100];let L;e[101]!==H?(L=s.jsxs("div",{className:"flex items-center space-x-2",children:[H,Se]}),e[101]=H,e[102]=L):L=e[102];let U;e[103]!==O||e[104]!==L?(U=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O,L]}),e[103]=O,e[104]=L,e[105]=U):U=e[105];let $;e[106]!==l.sub_albums||e[107]!==a?($=i=>{a("has_sub_albums",i),i?(a("images",[]),se(l.sub_albums.map(hs))):(a("sub_albums",[]),se([]))},e[106]=l.sub_albums,e[107]=a,e[108]=$):$=e[108];let X;e[109]!==l.has_sub_albums||e[110]!==$?(X=s.jsx(as,{id:"has_sub_albums",checked:l.has_sub_albums,onCheckedChange:$}),e[109]=l.has_sub_albums,e[110]=$,e[111]=X):X=e[111];let we;e[112]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(n,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[112]=we):we=e[112];let q;e[113]!==X?(q=s.jsxs("div",{className:"flex items-center space-x-2",children:[X,we]}),e[113]=X,e[114]=q):q=e[114];let J;e[115]!==D||e[116]!==F||e[117]!==U||e[118]!==q?(J=s.jsxs(Z,{children:[fe,s.jsxs(ee,{className:"space-y-4",children:[D,F,U,q]})]}),e[115]=D,e[116]=F,e[117]=U,e[118]=q,e[119]=J):J=e[119];let K;e[120]!==Ue||e[121]!==Xe||e[122]!==qe||e[123]!==l.has_sub_albums||e[124]!==l.sub_albums||e[125]!==$e||e[126]!==Je||e[127]!==a||e[128]!==p||e[129]!==S||e[130]!==le||e[131]!==w?(K=l.has_sub_albums&&s.jsxs(Z,{children:[s.jsx(Pe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{children:"Sub-Albums"}),s.jsxs(h,{type:"button",onClick:Ue,size:"sm",children:[s.jsx(es,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(ee,{className:"space-y-6",children:l.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):l.sub_albums.map((i,t)=>s.jsxs(Z,{children:[s.jsx(Pe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Te,{className:"text-base",children:["Sub-Album ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>$e(t),children:s.jsx(gs,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(g,{value:i.title,onChange:m=>le(t,"title",m.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:i.cover_image_id,onChange:m=>le(t,"cover_image_id",m.target.value),placeholder:"Google Drive file ID"}),s.jsx(d,{onPick:m=>le(t,"cover_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(De,{value:p[t]??"real",onValueChange:m=>{const r=[...p];r[t]=m,se(r)},children:[s.jsx(Ie,{className:"h-8 text-xs",children:s.jsx(Re,{placeholder:"Multi target"})}),s.jsxs(Ve,{children:[s.jsx(x,{value:"real",children:"Multi → Real IDs"}),s.jsx(x,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(d,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>qe(t,m)}),s.jsxs(h,{type:"button",variant:"outline",size:"sm",onClick:()=>Xe(t),children:[s.jsx(es,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),i.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:i.images.map((m,r)=>s.jsx(Z,{children:s.jsxs(ee,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",r+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Je(t,r),children:s.jsx(ls,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:m.virtual_image_id,onChange:c=>w(t,r,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",onPick:c=>w(t,r,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(g,{value:m.real_image_id,onChange:c=>w(t,r,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>w(t,r,"real_image_id",c)}),s.jsx("div",{className:"w-[120px]",children:s.jsxs(De,{value:S,onValueChange:c=>rs(c),children:[s.jsx(Ie,{className:"h-8 text-[10px]",children:s.jsx(Re,{})}),s.jsxs(Ve,{children:[s.jsx(x,{value:"real",children:"Multi → Real"}),s.jsx(x,{value:"virtual",children:"Multi → Virtual"})]})]})}),s.jsx(d,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:c=>{if(!c.length)return;const o=c[0],Ae=c.slice(1),j=[...l.sub_albums];if(S==="real"?j[t].images[r].real_image_id=o:j[t].images[r].virtual_image_id=o,Ae.length){const cs=Ae.map(ss=>({virtual_image_id:S==="virtual"?ss:"",real_image_id:S==="real"?ss:""}));j[t].images.splice(r+1,0,...cs)}a("sub_albums",j)}})]})]})]})},r))})]})]})]},t))})]}),e[120]=Ue,e[121]=Xe,e[122]=qe,e[123]=l.has_sub_albums,e[124]=l.sub_albums,e[125]=$e,e[126]=Je,e[127]=a,e[128]=p,e[129]=S,e[130]=le,e[131]=w,e[132]=K):K=e[132];let Q;e[133]!==Ke||e[134]!==Qe||e[135]!==l.has_sub_albums||e[136]!==l.images||e[137]!==_||e[138]!==y||e[139]!==We||e[140]!==a||e[141]!==C?(Q=!l.has_sub_albums&&s.jsxs(Z,{children:[s.jsx(Pe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(De,{value:_,onValueChange:i=>is(i),children:[s.jsx(Ie,{className:"h-8 text-xs",children:s.jsx(Re,{placeholder:"Multi target"})}),s.jsxs(Ve,{children:[s.jsx(x,{value:"real",children:"Multi → Real IDs"}),s.jsx(x,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(d,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Qe}),s.jsxs(h,{type:"button",onClick:Ke,size:"sm",children:[s.jsx(es,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(ee,{className:"space-y-4",children:l.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):l.images.map((i,t)=>s.jsx(Z,{children:s.jsxs(ee,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>We(t),children:s.jsx(ls,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:i.virtual_image_id,onChange:m=>C(t,"virtual_image_id",m.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",onPick:m=>C(t,"virtual_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(g,{value:i.real_image_id,onChange:m=>C(t,"real_image_id",m.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:m=>C(t,"real_image_id",m)}),s.jsx("div",{className:"w-[120px]",children:s.jsxs(De,{value:y,onValueChange:m=>ms(m),children:[s.jsx(Ie,{className:"h-8 text-[10px]",children:s.jsx(Re,{})}),s.jsxs(Ve,{children:[s.jsx(x,{value:"real",children:"Multi → Real"}),s.jsx(x,{value:"virtual",children:"Multi → Virtual"})]})]})}),s.jsx(d,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>{if(!m.length)return;const r=m[0],c=m.slice(1),o=[...l.images];if(y==="real"?o[t].real_image_id=r:o[t].virtual_image_id=r,c.length){const Ae=c.map(j=>({virtual_image_id:y==="virtual"?j:"",real_image_id:y==="real"?j:""}));o.splice(t+1,0,...Ae)}a("images",o)}})]})]})]})},t))})]}),e[133]=Ke,e[134]=Qe,e[135]=l.has_sub_albums,e[136]=l.images,e[137]=_,e[138]=y,e[139]=We,e[140]=a,e[141]=C,e[142]=Q):Q=e[142];let Ce;e[143]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx(h,{type:"button",variant:"outline",onClick:bs,children:"Cancel"}),e[143]=Ce):Ce=e[143];const Ze=ie?"Updating...":"Update Album";let W;e[144]!==ie||e[145]!==Ze?(W=s.jsxs("div",{className:"flex justify-end gap-2",children:[Ce,s.jsx(h,{type:"submit",disabled:ie,children:Ze})]}),e[144]=ie,e[145]=Ze,e[146]=W):W=e[146];let Y;e[147]!==Le||e[148]!==J||e[149]!==K||e[150]!==Q||e[151]!==W?(Y=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[je,s.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[J,K,Q,W]})]}),e[147]=Le,e[148]=J,e[149]=K,e[150]=Q,e[151]=W,e[152]=Y):Y=e[152];let ke;return e[153]!==k||e[154]!==Y?(ke=s.jsxs(ds,{breadcrumbs:ts,children:[k,Y]}),e[153]=k,e[154]=Y,e[155]=ke):ke=e[155],ke}function bs(){return window.history.back()}function hs(){return"real"}function xs(Ee){return[...Ee,"real"]}function _s(){return"real"}export{Rs as default};

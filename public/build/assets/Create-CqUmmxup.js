import{c as Me,u as Ge,j as s,H as ze}from"./app-CI2FFN7N.js";import{X as Ie,A as Fe}from"./app-layout-Dswb6okS.js";import{B as g}from"./app-logo-icon-Ce1K3WbZ.js";import{I as o}from"./input-BZDJUt_V.js";import{L as n}from"./label-CQL_QhAh.js";import{S as De}from"./switch-DKul1X41.js";import{b as B,C as he,a as _e,c as H}from"./card-BxbdQt7V.js";import{I as u}from"./IdPickerButton-BnrP4XzK.js";import{P as Pe}from"./plus-Bs9bW780.js";import{T as Ee}from"./trash-2-C_5CXp15.js";/* empty css            */import"./index-T-FqdA1k.js";import"./index-DfQSWW0A.js";import"./index-T61tjutk.js";const Oe=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Create Album",href:"#"}];function ts(){const e=Me.c(126);let V;e[0]===Symbol.for("react.memo_cache_sentinel")?(V={title:"",cover_image_id:"",has_sub_albums:!1,order:0,is_active:!0,sub_albums:[],images:[]},e[0]=V):V=e[0];const{data:a,setData:l,post:pe,processing:U,errors:d}=Ge(V);let X;e[1]!==pe?(X=t=>{t.preventDefault(),pe("/admin/gallery-albums")},e[1]=pe,e[2]=X):X=e[2];const fe=X;let $;e[3]!==a.sub_albums||e[4]!==l?($=()=>{l("sub_albums",[...a.sub_albums,{title:"",cover_image_id:"",images:[]}])},e[3]=a.sub_albums,e[4]=l,e[5]=$):$=e[5];const xe=$;let q;e[6]!==a.sub_albums||e[7]!==l?(q=(t,i,m)=>{const r=[...a.sub_albums];r[t]={...r[t],[i]:m},l("sub_albums",r)},e[6]=a.sub_albums,e[7]=l,e[8]=q):q=e[8];const R=q;let J;e[9]!==a.sub_albums||e[10]!==l?(J=t=>{l("sub_albums",a.sub_albums.filter((i,m)=>m!==t))},e[9]=a.sub_albums,e[10]=l,e[11]=J):J=e[11];const je=J;let K;e[12]!==a.sub_albums||e[13]!==l?(K=t=>{const i=[...a.sub_albums];i[t].images.push({virtual_image_id:"",real_image_id:""}),l("sub_albums",i)},e[12]=a.sub_albums,e[13]=l,e[14]=K):K=e[14];const ve=K;let Q;e[15]!==a.sub_albums||e[16]!==l?(Q=(t,i)=>{if(!i.length)return;const m=[...a.sub_albums],r=i.map(Ve);m[t].images=[...m[t].images,...r],l("sub_albums",m)},e[15]=a.sub_albums,e[16]=l,e[17]=Q):Q=e[17];const ye=Q;let W;e[18]!==a.sub_albums||e[19]!==l?(W=(t,i,m,r)=>{const c=[...a.sub_albums];c[t].images[i][m]=r,l("sub_albums",c)},e[18]=a.sub_albums,e[19]=l,e[20]=W):W=e[20];const b=W;let Y;e[21]!==a.sub_albums||e[22]!==l?(Y=(t,i)=>{const m=[...a.sub_albums];m[t].images=m[t].images.filter((r,c)=>c!==i),l("sub_albums",m)},e[21]=a.sub_albums,e[22]=l,e[23]=Y):Y=e[23];const Ne=Y;let Z;e[24]!==a.images||e[25]!==l?(Z=()=>{l("images",[...a.images,{virtual_image_id:"",real_image_id:""}])},e[24]=a.images,e[25]=l,e[26]=Z):Z=e[26];const Ce=Z;let ee;e[27]!==a.images||e[28]!==l?(ee=t=>{if(!t.length)return;const i=t.map(Le);l("images",[...a.images,...i])},e[27]=a.images,e[28]=l,e[29]=ee):ee=e[29];const Se=ee;let se;e[30]!==a.images||e[31]!==l?(se=(t,i,m)=>{const r=[...a.images];r[t][i]=m,l("images",r)},e[30]=a.images,e[31]=l,e[32]=se):se=e[32];const h=se;let ae;e[33]!==a.images||e[34]!==l?(ae=t=>{l("images",a.images.filter((i,m)=>m!==t))},e[33]=a.images,e[34]=l,e[35]=ae):ae=e[35];const we=ae;let le;e[36]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(ze,{title:"Create Gallery Album"}),e[36]=le):le=e[36];let te;e[37]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Create Gallery Album"})}),e[37]=te):te=e[37];let ie;e[38]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(he,{children:s.jsx(_e,{children:"Basic Information"})}),e[38]=ie):ie=e[38];let me;e[39]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[39]=me):me=e[39];let _;e[40]!==l?(_=t=>l("title",t.target.value),e[40]=l,e[41]=_):_=e[41];let p;e[42]!==a.title||e[43]!==_?(p=s.jsx(o,{id:"title",value:a.title,onChange:_,placeholder:"Enter album title"}),e[42]=a.title,e[43]=_,e[44]=p):p=e[44];let f;e[45]!==d.title?(f=d.title&&s.jsx("p",{className:"text-sm text-destructive",children:d.title}),e[45]=d.title,e[46]=f):f=e[46];let re;e[47]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Slug will be auto-generated from title"}),e[47]=re):re=e[47];let x;e[48]!==p||e[49]!==f?(x=s.jsxs("div",{className:"space-y-2",children:[me,p,f,re]}),e[48]=p,e[49]=f,e[50]=x):x=e[50];let ce;e[51]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(n,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[51]=ce):ce=e[51];let j;e[52]!==l?(j=t=>l("cover_image_id",t.target.value),e[52]=l,e[53]=j):j=e[53];let v;e[54]!==a.cover_image_id||e[55]!==j?(v=s.jsx(o,{id:"cover_image_id",value:a.cover_image_id,onChange:j,placeholder:"Enter Google Drive file ID"}),e[54]=a.cover_image_id,e[55]=j,e[56]=v):v=e[56];let y;e[57]!==l?(y=s.jsx(u,{onPick:t=>l("cover_image_id",t)}),e[57]=l,e[58]=y):y=e[58];let N;e[59]!==v||e[60]!==y?(N=s.jsxs("div",{className:"flex gap-2",children:[v,y]}),e[59]=v,e[60]=y,e[61]=N):N=e[61];let C;e[62]!==d.cover_image_id?(C=d.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:d.cover_image_id}),e[62]=d.cover_image_id,e[63]=C):C=e[63];let S;e[64]!==N||e[65]!==C?(S=s.jsxs("div",{className:"space-y-2",children:[ce,N,C]}),e[64]=N,e[65]=C,e[66]=S):S=e[66];let ne;e[67]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(n,{htmlFor:"order",children:"Order"}),e[67]=ne):ne=e[67];let w;e[68]!==l?(w=t=>l("order",parseInt(t.target.value)||0),e[68]=l,e[69]=w):w=e[69];let k;e[70]!==a.order||e[71]!==w?(k=s.jsxs("div",{className:"space-y-2",children:[ne,s.jsx(o,{id:"order",type:"number",value:a.order,onChange:w})]}),e[70]=a.order,e[71]=w,e[72]=k):k=e[72];let A;e[73]!==l?(A=t=>l("is_active",t),e[73]=l,e[74]=A):A=e[74];let P;e[75]!==a.is_active||e[76]!==A?(P=s.jsx(De,{id:"is_active",checked:a.is_active,onCheckedChange:A}),e[75]=a.is_active,e[76]=A,e[77]=P):P=e[77];let ue;e[78]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[78]=ue):ue=e[78];let I;e[79]!==P?(I=s.jsxs("div",{className:"flex items-center space-x-2",children:[P,ue]}),e[79]=P,e[80]=I):I=e[80];let D;e[81]!==k||e[82]!==I?(D=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k,I]}),e[81]=k,e[82]=I,e[83]=D):D=e[83];let T;e[84]!==l?(T=t=>{l("has_sub_albums",t),t?l("images",[]):l("sub_albums",[])},e[84]=l,e[85]=T):T=e[85];let M;e[86]!==a.has_sub_albums||e[87]!==T?(M=s.jsx(De,{id:"has_sub_albums",checked:a.has_sub_albums,onCheckedChange:T}),e[86]=a.has_sub_albums,e[87]=T,e[88]=M):M=e[88];let oe;e[89]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(n,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[89]=oe):oe=e[89];let G;e[90]!==M?(G=s.jsxs("div",{className:"flex items-center space-x-2",children:[M,oe]}),e[90]=M,e[91]=G):G=e[91];let z;e[92]!==x||e[93]!==S||e[94]!==D||e[95]!==G?(z=s.jsxs(B,{children:[ie,s.jsxs(H,{className:"space-y-4",children:[x,S,D,G]})]}),e[92]=x,e[93]=S,e[94]=D,e[95]=G,e[96]=z):z=e[96];let F;e[97]!==xe||e[98]!==ve||e[99]!==ye||e[100]!==a.has_sub_albums||e[101]!==a.sub_albums||e[102]!==je||e[103]!==Ne||e[104]!==l||e[105]!==R||e[106]!==b?(F=a.has_sub_albums&&s.jsxs(B,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(_e,{children:"Sub-Albums"}),s.jsxs(g,{type:"button",onClick:xe,size:"sm",children:[s.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(H,{className:"space-y-6",children:a.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):a.sub_albums.map((t,i)=>s.jsxs(B,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(_e,{className:"text-base",children:["Sub-Album ",i+1]}),s.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>je(i),children:s.jsx(Ee,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(H,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(o,{value:t.title,onChange:m=>R(i,"title",m.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{value:t.cover_image_id,onChange:m=>R(i,"cover_image_id",m.target.value),placeholder:"Google Drive file ID"}),s.jsx(u,{onPick:m=>R(i,"cover_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>ye(i,m)}),s.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>ve(i),children:[s.jsx(Pe,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),t.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:t.images.map((m,r)=>s.jsx(B,{children:s.jsxs(H,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",r+1]}),s.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ne(i,r),children:s.jsx(Ie,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{value:m.virtual_image_id,onChange:c=>b(i,r,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(u,{label:"Pick",onPick:c=>b(i,r,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{value:m.real_image_id,onChange:c=>b(i,r,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(u,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>b(i,r,"real_image_id",c)}),s.jsx(u,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:c=>{if(!c.length)return;const L=c[0],be=c.slice(1),Ae=[...a.sub_albums];if(Ae[i].images[r].real_image_id=L,be.length){const Te=be.map(Re);Ae[i].images.splice(r+1,0,...Te)}l("sub_albums",Ae)}})]})]})]})},r))})]})]})]},i))})]}),e[97]=xe,e[98]=ve,e[99]=ye,e[100]=a.has_sub_albums,e[101]=a.sub_albums,e[102]=je,e[103]=Ne,e[104]=l,e[105]=R,e[106]=b,e[107]=F):F=e[107];let E;e[108]!==Ce||e[109]!==Se||e[110]!==a.has_sub_albums||e[111]!==a.images||e[112]!==we||e[113]!==l||e[114]!==h?(E=!a.has_sub_albums&&s.jsxs(B,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(_e,{children:"Images"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Se}),s.jsxs(g,{type:"button",onClick:Ce,size:"sm",children:[s.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(H,{className:"space-y-4",children:a.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):a.images.map((t,i)=>s.jsx(B,{children:s.jsxs(H,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",i+1]}),s.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>we(i),children:s.jsx(Ie,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{value:t.virtual_image_id,onChange:m=>h(i,"virtual_image_id",m.target.value),placeholder:"Optional"}),s.jsx(u,{label:"Pick",onPick:m=>h(i,"virtual_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{value:t.real_image_id,onChange:m=>h(i,"real_image_id",m.target.value),placeholder:"Optional"}),s.jsx(u,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:m=>h(i,"real_image_id",m)}),s.jsx(u,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>{if(!m.length)return;const r=m[0],c=m.slice(1),L=[...a.images];if(L[i].real_image_id=r,c.length){const be=c.map(He);L.splice(i+1,0,...be)}l("images",L)}})]})]})]})},i))})]}),e[108]=Ce,e[109]=Se,e[110]=a.has_sub_albums,e[111]=a.images,e[112]=we,e[113]=l,e[114]=h,e[115]=E):E=e[115];let de;e[116]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(g,{type:"button",variant:"outline",onClick:Be,children:"Cancel"}),e[116]=de):de=e[116];const ke=U?"Creating...":"Create Album";let O;e[117]!==U||e[118]!==ke?(O=s.jsxs("div",{className:"flex justify-end gap-2",children:[de,s.jsx(g,{type:"submit",disabled:U,children:ke})]}),e[117]=U,e[118]=ke,e[119]=O):O=e[119];let ge;return e[120]!==fe||e[121]!==z||e[122]!==F||e[123]!==E||e[124]!==O?(ge=s.jsxs(Fe,{breadcrumbs:Oe,children:[le,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[te,s.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[z,F,E,O]})]})]}),e[120]=fe,e[121]=z,e[122]=F,e[123]=E,e[124]=O,e[125]=ge):ge=e[125],ge}function Be(){return window.history.back()}function He(e){return{virtual_image_id:"",real_image_id:e}}function Re(e){return{virtual_image_id:"",real_image_id:e}}function Le(e){return{virtual_image_id:"",real_image_id:e}}function Ve(e){return{virtual_image_id:"",real_image_id:e}}export{ts as default};

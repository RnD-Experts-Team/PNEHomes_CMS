import{c as Be,u as He,r as Te,j as s,H as Le}from"./app-DG8A1jTv.js";import{X as Ge,A as Ue}from"./app-layout-BWwBoild.js";import{B as d}from"./app-logo-icon-Ckm5885K.js";import{I as u}from"./input-CaDIzDBk.js";import{L as n}from"./label-BPtoZNuR.js";import{S as Ve}from"./switch-D-LMKmCz.js";import{b as B,C as _e,a as pe,c as H}from"./card-BTIh-tkD.js";import{I as b}from"./IdPickerButton-jKDBxAO9.js";import{c as ze,S as Ee,a as Fe,b as Re,d as je}from"./select-DRiYWwD-.js";import{P as Pe}from"./plus-B1Ieu5-B.js";import{T as Xe}from"./trash-2-BbPlZyRH.js";/* empty css            */import"./index-DeZ7PuZj.js";import"./index-BF49ZChp.js";import"./index-T61tjutk.js";import"./check-CGGVTq9Y.js";const $e=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Create Album",href:"#"}];function ds(){const e=Be.c(130);let X;e[0]===Symbol.for("react.memo_cache_sentinel")?(X={title:"",cover_image_id:"",has_sub_albums:!1,order:0,is_active:!0,sub_albums:[],images:[]},e[0]=X):X=e[0];const{data:a,setData:l,post:fe,processing:$,errors:o}=He(X),[h,Oe]=Te.useState("real");let q;e[1]===Symbol.for("react.memo_cache_sentinel")?(q=[],e[1]=q):q=e[1];const[g,L]=Te.useState(q);let J;e[2]!==fe?(J=t=>{t.preventDefault(),fe("/admin/gallery-albums")},e[2]=fe,e[3]=J):J=e[3];const ve=J;let K;e[4]!==a.sub_albums||e[5]!==l?(K=()=>{l("sub_albums",[...a.sub_albums,{title:"",cover_image_id:"",images:[]}]),L(Ke)},e[4]=a.sub_albums,e[5]=l,e[6]=K):K=e[6];const ye=K;let Q;e[7]!==a.sub_albums||e[8]!==l?(Q=(t,i,m)=>{const r=[...a.sub_albums];r[t]={...r[t],[i]:m},l("sub_albums",r)},e[7]=a.sub_albums,e[8]=l,e[9]=Q):Q=e[9];const U=Q;let W;e[10]!==a.sub_albums||e[11]!==l?(W=t=>{l("sub_albums",a.sub_albums.filter((i,m)=>m!==t)),L(i=>i.filter((m,r)=>r!==t))},e[10]=a.sub_albums,e[11]=l,e[12]=W):W=e[12];const Ne=W;let Y;e[13]!==a.sub_albums||e[14]!==l?(Y=t=>{const i=[...a.sub_albums];i[t].images.push({virtual_image_id:"",real_image_id:""}),l("sub_albums",i)},e[13]=a.sub_albums,e[14]=l,e[15]=Y):Y=e[15];const Se=Y;let Z;e[16]!==a.sub_albums||e[17]!==l||e[18]!==g?(Z=(t,i)=>{if(!i.length)return;const m=g[t]??"real",r=[...a.sub_albums],c=i.map(Me=>({virtual_image_id:m==="virtual"?Me:"",real_image_id:m==="real"?Me:""}));r[t].images=[...r[t].images,...c],l("sub_albums",r)},e[16]=a.sub_albums,e[17]=l,e[18]=g,e[19]=Z):Z=e[19];const Ce=Z;let ee;e[20]!==a.sub_albums||e[21]!==l?(ee=(t,i,m,r)=>{const c=[...a.sub_albums];c[t].images[i][m]=r,l("sub_albums",c)},e[20]=a.sub_albums,e[21]=l,e[22]=ee):ee=e[22];const x=ee;let se;e[23]!==a.sub_albums||e[24]!==l?(se=(t,i)=>{const m=[...a.sub_albums];m[t].images=m[t].images.filter((r,c)=>c!==i),l("sub_albums",m)},e[23]=a.sub_albums,e[24]=l,e[25]=se):se=e[25];const we=se;let ae;e[26]!==a.images||e[27]!==l?(ae=()=>{l("images",[...a.images,{virtual_image_id:"",real_image_id:""}])},e[26]=a.images,e[27]=l,e[28]=ae):ae=e[28];const ke=ae;let le;e[29]!==a.images||e[30]!==h||e[31]!==l?(le=t=>{if(!t.length)return;const i=t.map(m=>({virtual_image_id:h==="virtual"?m:"",real_image_id:h==="real"?m:""}));l("images",[...a.images,...i])},e[29]=a.images,e[30]=h,e[31]=l,e[32]=le):le=e[32];const Ae=le;let te;e[33]!==a.images||e[34]!==l?(te=(t,i,m)=>{const r=[...a.images];r[t][i]=m,l("images",r)},e[33]=a.images,e[34]=l,e[35]=te):te=e[35];const _=te;let ie;e[36]!==a.images||e[37]!==l?(ie=t=>{l("images",a.images.filter((i,m)=>m!==t))},e[36]=a.images,e[37]=l,e[38]=ie):ie=e[38];const Ie=ie;let me;e[39]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Le,{title:"Create Gallery Album"}),e[39]=me):me=e[39];let re;e[40]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Create Gallery Album"})}),e[40]=re):re=e[40];let ce;e[41]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(_e,{children:s.jsx(pe,{children:"Basic Information"})}),e[41]=ce):ce=e[41];let ne;e[42]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[42]=ne):ne=e[42];let p;e[43]!==l?(p=t=>l("title",t.target.value),e[43]=l,e[44]=p):p=e[44];let j;e[45]!==a.title||e[46]!==p?(j=s.jsx(u,{id:"title",value:a.title,onChange:p,placeholder:"Enter album title"}),e[45]=a.title,e[46]=p,e[47]=j):j=e[47];let f;e[48]!==o.title?(f=o.title&&s.jsx("p",{className:"text-sm text-destructive",children:o.title}),e[48]=o.title,e[49]=f):f=e[49];let ue;e[50]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Slug will be auto-generated from title"}),e[50]=ue):ue=e[50];let v;e[51]!==j||e[52]!==f?(v=s.jsxs("div",{className:"space-y-2",children:[ne,j,f,ue]}),e[51]=j,e[52]=f,e[53]=v):v=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(n,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[54]=oe):oe=e[54];let y;e[55]!==l?(y=t=>l("cover_image_id",t.target.value),e[55]=l,e[56]=y):y=e[56];let N;e[57]!==a.cover_image_id||e[58]!==y?(N=s.jsx(u,{id:"cover_image_id",value:a.cover_image_id,onChange:y,placeholder:"Enter Google Drive file ID"}),e[57]=a.cover_image_id,e[58]=y,e[59]=N):N=e[59];let S;e[60]!==l?(S=s.jsx(b,{onPick:t=>l("cover_image_id",t)}),e[60]=l,e[61]=S):S=e[61];let C;e[62]!==N||e[63]!==S?(C=s.jsxs("div",{className:"flex gap-2",children:[N,S]}),e[62]=N,e[63]=S,e[64]=C):C=e[64];let w;e[65]!==o.cover_image_id?(w=o.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:o.cover_image_id}),e[65]=o.cover_image_id,e[66]=w):w=e[66];let k;e[67]!==C||e[68]!==w?(k=s.jsxs("div",{className:"space-y-2",children:[oe,C,w]}),e[67]=C,e[68]=w,e[69]=k):k=e[69];let de;e[70]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(n,{htmlFor:"order",children:"Order"}),e[70]=de):de=e[70];let A;e[71]!==l?(A=t=>l("order",parseInt(t.target.value)||0),e[71]=l,e[72]=A):A=e[72];let I;e[73]!==a.order||e[74]!==A?(I=s.jsxs("div",{className:"space-y-2",children:[de,s.jsx(u,{id:"order",type:"number",value:a.order,onChange:A})]}),e[73]=a.order,e[74]=A,e[75]=I):I=e[75];let D;e[76]!==l?(D=t=>l("is_active",t),e[76]=l,e[77]=D):D=e[77];let P;e[78]!==a.is_active||e[79]!==D?(P=s.jsx(Ve,{id:"is_active",checked:a.is_active,onCheckedChange:D}),e[78]=a.is_active,e[79]=D,e[80]=P):P=e[80];let be;e[81]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[81]=be):be=e[81];let M;e[82]!==P?(M=s.jsxs("div",{className:"flex items-center space-x-2",children:[P,be]}),e[82]=P,e[83]=M):M=e[83];let T;e[84]!==I||e[85]!==M?(T=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I,M]}),e[84]=I,e[85]=M,e[86]=T):T=e[86];let G;e[87]!==a.sub_albums||e[88]!==l?(G=t=>{l("has_sub_albums",t),t?(l("images",[]),L(a.sub_albums.map(Je))):(l("sub_albums",[]),L([]))},e[87]=a.sub_albums,e[88]=l,e[89]=G):G=e[89];let V;e[90]!==a.has_sub_albums||e[91]!==G?(V=s.jsx(Ve,{id:"has_sub_albums",checked:a.has_sub_albums,onCheckedChange:G}),e[90]=a.has_sub_albums,e[91]=G,e[92]=V):V=e[92];let he;e[93]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(n,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[93]=he):he=e[93];let z;e[94]!==V?(z=s.jsxs("div",{className:"flex items-center space-x-2",children:[V,he]}),e[94]=V,e[95]=z):z=e[95];let E;e[96]!==v||e[97]!==k||e[98]!==T||e[99]!==z?(E=s.jsxs(B,{children:[ce,s.jsxs(H,{className:"space-y-4",children:[v,k,T,z]})]}),e[96]=v,e[97]=k,e[98]=T,e[99]=z,e[100]=E):E=e[100];let F;e[101]!==ye||e[102]!==Se||e[103]!==Ce||e[104]!==a.has_sub_albums||e[105]!==a.sub_albums||e[106]!==Ne||e[107]!==we||e[108]!==g||e[109]!==U||e[110]!==x?(F=a.has_sub_albums&&s.jsxs(B,{children:[s.jsx(_e,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{children:"Sub-Albums"}),s.jsxs(d,{type:"button",onClick:ye,size:"sm",children:[s.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(H,{className:"space-y-6",children:a.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):a.sub_albums.map((t,i)=>s.jsxs(B,{children:[s.jsx(_e,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(pe,{className:"text-base",children:["Sub-Album ",i+1]}),s.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ne(i),children:s.jsx(Xe,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(H,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(u,{value:t.title,onChange:m=>U(i,"title",m.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{value:t.cover_image_id,onChange:m=>U(i,"cover_image_id",m.target.value),placeholder:"Google Drive file ID"}),s.jsx(b,{onPick:m=>U(i,"cover_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(ze,{value:g[i]??"real",onValueChange:m=>{const r=[...g];r[i]=m,L(r)},children:[s.jsx(Ee,{className:"h-8 text-xs",children:s.jsx(Fe,{placeholder:"Multi target"})}),s.jsxs(Re,{children:[s.jsx(je,{value:"real",children:"Multi → Real IDs"}),s.jsx(je,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(b,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:m=>Ce(i,m)}),s.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>Se(i),children:[s.jsx(Pe,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),t.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:t.images.map((m,r)=>s.jsx(B,{children:s.jsxs(H,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",r+1]}),s.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>we(i,r),children:s.jsx(Ge,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{value:m.virtual_image_id,onChange:c=>x(i,r,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(b,{label:"Pick",onPick:c=>x(i,r,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{value:m.real_image_id,onChange:c=>x(i,r,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(b,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>x(i,r,"real_image_id",c)})]})]})]})},r))})]})]})]},i))})]}),e[101]=ye,e[102]=Se,e[103]=Ce,e[104]=a.has_sub_albums,e[105]=a.sub_albums,e[106]=Ne,e[107]=we,e[108]=g,e[109]=U,e[110]=x,e[111]=F):F=e[111];let R;e[112]!==ke||e[113]!==Ae||e[114]!==a.has_sub_albums||e[115]!==a.images||e[116]!==h||e[117]!==Ie||e[118]!==_?(R=!a.has_sub_albums&&s.jsxs(B,{children:[s.jsx(_e,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pe,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"w-[160px]",children:s.jsxs(ze,{value:h,onValueChange:t=>Oe(t),children:[s.jsx(Ee,{className:"h-8 text-xs",children:s.jsx(Fe,{placeholder:"Multi target"})}),s.jsxs(Re,{children:[s.jsx(je,{value:"real",children:"Multi → Real IDs"}),s.jsx(je,{value:"virtual",children:"Multi → Virtual IDs"})]})]})}),s.jsx(b,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:Ae}),s.jsxs(d,{type:"button",onClick:ke,size:"sm",children:[s.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(H,{className:"space-y-4",children:a.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):a.images.map((t,i)=>s.jsx(B,{children:s.jsxs(H,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",i+1]}),s.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ie(i),children:s.jsx(Ge,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{value:t.virtual_image_id,onChange:m=>_(i,"virtual_image_id",m.target.value),placeholder:"Optional"}),s.jsx(b,{label:"Pick",onPick:m=>_(i,"virtual_image_id",m)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{value:t.real_image_id,onChange:m=>_(i,"real_image_id",m.target.value),placeholder:"Optional"}),s.jsx(b,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:m=>_(i,"real_image_id",m)})]})]})]})},i))})]}),e[112]=ke,e[113]=Ae,e[114]=a.has_sub_albums,e[115]=a.images,e[116]=h,e[117]=Ie,e[118]=_,e[119]=R):R=e[119];let ge;e[120]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(d,{type:"button",variant:"outline",onClick:qe,children:"Cancel"}),e[120]=ge):ge=e[120];const De=$?"Creating...":"Create Album";let O;e[121]!==$||e[122]!==De?(O=s.jsxs("div",{className:"flex justify-end gap-2",children:[ge,s.jsx(d,{type:"submit",disabled:$,children:De})]}),e[121]=$,e[122]=De,e[123]=O):O=e[123];let xe;return e[124]!==ve||e[125]!==E||e[126]!==F||e[127]!==R||e[128]!==O?(xe=s.jsxs(Ue,{breadcrumbs:$e,children:[me,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[re,s.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[E,F,R,O]})]})]}),e[124]=ve,e[125]=E,e[126]=F,e[127]=R,e[128]=O,e[129]=xe):xe=e[129],xe}function qe(){return window.history.back()}function Je(){return"real"}function Ke(e){return[...e,"real"]}export{ds as default};

import{c as ts,u as is,r as Ae,j as s,H as rs}from"./app-wpqwjbtX.js";import{X as We,A as ms}from"./app-layout-DXFS_gc8.js";import{B as h}from"./app-logo-icon-lL51jTjN.js";import{I as g}from"./input-BJF06auV.js";import{L as u}from"./label-D_OYlgFh.js";import{S as Ye}from"./switch-Cm-heFoV.js";import{b as Y,C as Me,a as Pe,c as Z}from"./card-CgzcdBGG.js";import{I as d}from"./IdPickerButton-CQ-eLGHN.js";import{P as Ke}from"./plus-Cvt80K6p.js";import{T as cs}from"./trash-2-BNmRtWD_.js";/* empty css            */import"./index-CDTu5uXC.js";import"./index-j3RQl5ey.js";import"./index-T61tjutk.js";function ks(De){const e=ts.c(156),{album:n}=De;let ae;e[0]===Symbol.for("react.memo_cache_sentinel")?(ae=[{title:"Gallery",href:"/admin/gallery-albums"},{title:"Edit Album",href:"#"}],e[0]=ae):ae=e[0];const Ze=ae,Te=n.title||"",Ie=n.cover_image_id||"",Re=n.has_sub_albums??!1,Ee=n.order||0,ze=n.is_active??!0;let j;e[1]!==n.sub_albums?(j=n.sub_albums||[],e[1]=n.sub_albums,e[2]=j):j=e[2];let f;e[3]!==n.images?(f=n.images||[],e[3]=n.images,e[4]=f):f=e[4];let le;e[5]!==Te||e[6]!==Ie||e[7]!==Re||e[8]!==Ee||e[9]!==ze||e[10]!==j||e[11]!==f?(le={title:Te,cover_image_id:Ie,has_sub_albums:Re,order:Ee,is_active:ze,sub_albums:j,images:f},e[5]=Te,e[6]=Ie,e[7]=Re,e[8]=Ee,e[9]=ze,e[10]=j,e[11]=f,e[12]=le):le=e[12];const{data:a,setData:l,put:Fe,processing:te,errors:b}=is(le),[p,es]=Ae.useState("real"),[v,ss]=Ae.useState("real");let y;e[13]!==n.sub_albums?(y=n.sub_albums||[],e[13]=n.sub_albums,e[14]=y):y=e[14];let ie;e[15]!==y?(ie=y.map(ds),e[15]=y,e[16]=ie):ie=e[16];const[x,ee]=Ae.useState(ie),[N,as]=Ae.useState("real");let re;e[17]!==n.id||e[18]!==Fe?(re=i=>{i.preventDefault(),Fe(`/admin/gallery-albums/${n.id}`)},e[17]=n.id,e[18]=Fe,e[19]=re):re=e[19];const Ge=re;let me;e[20]!==a.sub_albums||e[21]!==l?(me=()=>{l("sub_albums",[...a.sub_albums,{title:"",cover_image_id:"",images:[]}]),ee(os)},e[20]=a.sub_albums,e[21]=l,e[22]=me):me=e[22];const Ve=me;let ce;e[23]!==a.sub_albums||e[24]!==l?(ce=(i,t,r)=>{const m=[...a.sub_albums];m[i]={...m[i],[t]:r},l("sub_albums",m)},e[23]=a.sub_albums,e[24]=l,e[25]=ce):ce=e[25];const se=ce;let ne;e[26]!==a.sub_albums||e[27]!==l?(ne=i=>{l("sub_albums",a.sub_albums.filter((t,r)=>r!==i)),ee(t=>t.filter((r,m)=>m!==i))},e[26]=a.sub_albums,e[27]=l,e[28]=ne):ne=e[28];const Oe=ne;let ue;e[29]!==a.sub_albums||e[30]!==l?(ue=i=>{const t=[...a.sub_albums];t[i].images.push({virtual_image_id:"",real_image_id:""}),l("sub_albums",t)},e[29]=a.sub_albums,e[30]=l,e[31]=ue):ue=e[31];const Be=ue;let oe;e[32]!==a.sub_albums||e[33]!==l||e[34]!==x?(oe=(i,t)=>{if(!t.length)return;const r=x[i]??"real",m=[...a.sub_albums],c=t.map(o=>({virtual_image_id:r==="virtual"?o:"",real_image_id:r==="real"?o:""}));m[i].images=[...m[i].images,...c],l("sub_albums",m)},e[32]=a.sub_albums,e[33]=l,e[34]=x,e[35]=oe):oe=e[35];const He=oe;let de;e[36]!==a.sub_albums||e[37]!==l?(de=(i,t,r,m)=>{const c=[...a.sub_albums];c[i].images[t][r]=m,l("sub_albums",c)},e[36]=a.sub_albums,e[37]=l,e[38]=de):de=e[38];const S=de;let ge;e[39]!==a.sub_albums||e[40]!==l?(ge=(i,t)=>{const r=[...a.sub_albums];r[i].images=r[i].images.filter((m,c)=>c!==t),l("sub_albums",r)},e[39]=a.sub_albums,e[40]=l,e[41]=ge):ge=e[41];const Le=ge;let be;e[42]!==a.images||e[43]!==l?(be=()=>{l("images",[...a.images,{virtual_image_id:"",real_image_id:""}])},e[42]=a.images,e[43]=l,e[44]=be):be=e[44];const Ue=be;let he;e[45]!==a.images||e[46]!==p||e[47]!==l?(he=i=>{if(!i.length)return;const t=i.map(r=>({virtual_image_id:p==="virtual"?r:"",real_image_id:p==="real"?r:""}));l("images",[...a.images,...t])},e[45]=a.images,e[46]=p,e[47]=l,e[48]=he):he=e[48];const $e=he;let pe;e[49]!==a.images||e[50]!==l?(pe=(i,t,r)=>{const m=[...a.images];m[i][t]=r,l("images",m)},e[49]=a.images,e[50]=l,e[51]=pe):pe=e[51];const w=pe;let xe;e[52]!==a.images||e[53]!==l?(xe=i=>{l("images",a.images.filter((t,r)=>r!==i))},e[52]=a.images,e[53]=l,e[54]=xe):xe=e[54];const Xe=xe,qe=`Edit Album - ${n.title}`;let C;e[55]!==qe?(C=s.jsx(rs,{title:qe}),e[55]=qe,e[56]=C):C=e[56];let _e;e[57]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Edit Gallery Album"})}),e[57]=_e):_e=e[57];let je;e[58]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(Me,{children:s.jsx(Pe,{children:"Basic Information"})}),e[58]=je):je=e[58];let fe;e[59]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(u,{htmlFor:"title",children:"Title *"}),e[59]=fe):fe=e[59];let k;e[60]!==l?(k=i=>l("title",i.target.value),e[60]=l,e[61]=k):k=e[61];let A;e[62]!==a.title||e[63]!==k?(A=s.jsx(g,{id:"title",value:a.title,onChange:k,placeholder:"Enter album title"}),e[62]=a.title,e[63]=k,e[64]=A):A=e[64];let M;e[65]!==b.title?(M=b.title&&s.jsx("p",{className:"text-sm text-destructive",children:b.title}),e[65]=b.title,e[66]=M):M=e[66];let P;e[67]!==n.slug?(P=s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current slug: ",s.jsx("code",{children:n.slug})]}),e[67]=n.slug,e[68]=P):P=e[68];let D;e[69]!==A||e[70]!==M||e[71]!==P?(D=s.jsxs("div",{className:"space-y-2",children:[fe,A,M,P]}),e[69]=A,e[70]=M,e[71]=P,e[72]=D):D=e[72];let ve;e[73]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(u,{htmlFor:"cover_image_id",children:"Cover Image ID (Google Drive) *"}),e[73]=ve):ve=e[73];let T;e[74]!==l?(T=i=>l("cover_image_id",i.target.value),e[74]=l,e[75]=T):T=e[75];let I;e[76]!==a.cover_image_id||e[77]!==T?(I=s.jsx(g,{id:"cover_image_id",value:a.cover_image_id,onChange:T,placeholder:"Enter Google Drive file ID"}),e[76]=a.cover_image_id,e[77]=T,e[78]=I):I=e[78];let R;e[79]!==l?(R=s.jsx(d,{onPick:i=>l("cover_image_id",i)}),e[79]=l,e[80]=R):R=e[80];let E;e[81]!==I||e[82]!==R?(E=s.jsxs("div",{className:"flex gap-2",children:[I,R]}),e[81]=I,e[82]=R,e[83]=E):E=e[83];let z;e[84]!==b.cover_image_id?(z=b.cover_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:b.cover_image_id}),e[84]=b.cover_image_id,e[85]=z):z=e[85];let F;e[86]!==E||e[87]!==z?(F=s.jsxs("div",{className:"space-y-2",children:[ve,E,z]}),e[86]=E,e[87]=z,e[88]=F):F=e[88];let ye;e[89]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(u,{htmlFor:"order",children:"Order"}),e[89]=ye):ye=e[89];let G;e[90]!==l?(G=i=>l("order",parseInt(i.target.value)||0),e[90]=l,e[91]=G):G=e[91];let V;e[92]!==a.order||e[93]!==G?(V=s.jsxs("div",{className:"space-y-2",children:[ye,s.jsx(g,{id:"order",type:"number",value:a.order,onChange:G})]}),e[92]=a.order,e[93]=G,e[94]=V):V=e[94];let O;e[95]!==l?(O=i=>l("is_active",i),e[95]=l,e[96]=O):O=e[96];let B;e[97]!==a.is_active||e[98]!==O?(B=s.jsx(Ye,{id:"is_active",checked:a.is_active,onCheckedChange:O}),e[97]=a.is_active,e[98]=O,e[99]=B):B=e[99];let Ne;e[100]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(u,{htmlFor:"is_active",children:"Active"}),e[100]=Ne):Ne=e[100];let H;e[101]!==B?(H=s.jsxs("div",{className:"flex items-center space-x-2",children:[B,Ne]}),e[101]=B,e[102]=H):H=e[102];let L;e[103]!==V||e[104]!==H?(L=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V,H]}),e[103]=V,e[104]=H,e[105]=L):L=e[105];let U;e[106]!==a.sub_albums||e[107]!==l?(U=i=>{l("has_sub_albums",i),i?(l("images",[]),ee(a.sub_albums.map(us))):(l("sub_albums",[]),ee([]))},e[106]=a.sub_albums,e[107]=l,e[108]=U):U=e[108];let $;e[109]!==a.has_sub_albums||e[110]!==U?($=s.jsx(Ye,{id:"has_sub_albums",checked:a.has_sub_albums,onCheckedChange:U}),e[109]=a.has_sub_albums,e[110]=U,e[111]=$):$=e[111];let Se;e[112]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(u,{htmlFor:"has_sub_albums",children:"Has Sub-Albums"}),e[112]=Se):Se=e[112];let X;e[113]!==$?(X=s.jsxs("div",{className:"flex items-center space-x-2",children:[$,Se]}),e[113]=$,e[114]=X):X=e[114];let q;e[115]!==D||e[116]!==F||e[117]!==L||e[118]!==X?(q=s.jsxs(Y,{children:[je,s.jsxs(Z,{className:"space-y-4",children:[D,F,L,X]})]}),e[115]=D,e[116]=F,e[117]=L,e[118]=X,e[119]=q):q=e[119];let J;e[120]!==Ve||e[121]!==Be||e[122]!==He||e[123]!==a.has_sub_albums||e[124]!==a.sub_albums||e[125]!==Oe||e[126]!==Le||e[127]!==l||e[128]!==x||e[129]!==N||e[130]!==se||e[131]!==S?(J=a.has_sub_albums&&s.jsxs(Y,{children:[s.jsx(Me,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Pe,{children:"Sub-Albums"}),s.jsxs(h,{type:"button",onClick:Ve,size:"sm",children:[s.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Add Sub-Album"]})]})}),s.jsx(Z,{className:"space-y-6",children:a.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No sub-albums added yet. Click "Add Sub-Album" to get started.'}):a.sub_albums.map((i,t)=>s.jsxs(Y,{children:[s.jsx(Me,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Pe,{className:"text-base",children:["Sub-Album ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Oe(t),children:s.jsx(cs,{className:"h-4 w-4 text-destructive"})})]})}),s.jsxs(Z,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Title *"}),s.jsx(g,{value:i.title,onChange:r=>se(t,"title",r.target.value),placeholder:"Enter sub-album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Cover Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:i.cover_image_id,onChange:r=>se(t,"cover_image_id",r.target.value),placeholder:"Google Drive file ID"}),s.jsx(d,{onPick:r=>se(t,"cover_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(u,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-2 py-1",children:[s.jsx(u,{className:"text-xs",children:"Multi →"}),s.jsxs("select",{className:"text-xs bg-transparent outline-none",value:x[t]??"real",onChange:r=>{const m=[...x];m[t]=r.target.value,ee(m)},children:[s.jsx("option",{value:"real",children:"Real IDs"}),s.jsx("option",{value:"virtual",children:"Virtual IDs"})]})]}),s.jsx(d,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>He(t,r)}),s.jsxs(h,{type:"button",variant:"outline",size:"sm",onClick:()=>Be(t),children:[s.jsx(Ke,{className:"mr-2 h-3 w-3"}),"Add Image"]})]})]}),i.images.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-3",children:i.images.map((r,m)=>s.jsx(Y,{children:s.jsxs(Z,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Image ",m+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Le(t,m),children:s.jsx(We,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:r.virtual_image_id,onChange:c=>S(t,m,"virtual_image_id",c.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",onPick:c=>S(t,m,"virtual_image_id",c)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-xs",children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(g,{value:r.real_image_id,onChange:c=>S(t,m,"real_image_id",c.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:c=>S(t,m,"real_image_id",c)}),s.jsxs("div",{className:"flex items-center gap-1 rounded-md border px-2 py-1",children:[s.jsx(u,{className:"text-[10px]",children:"Multi →"}),s.jsxs("select",{className:"text-[10px] bg-transparent outline-none",value:N,onChange:c=>as(c.target.value),children:[s.jsx("option",{value:"real",children:"Real"}),s.jsx("option",{value:"virtual",children:"Virtual"})]})]}),s.jsx(d,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:c=>{if(!c.length)return;const o=c[0],ke=c.slice(1),_=[...a.sub_albums];if(N==="real"?_[t].images[m].real_image_id=o:_[t].images[m].virtual_image_id=o,ke.length){const ls=ke.map(Qe=>({virtual_image_id:N==="virtual"?Qe:"",real_image_id:N==="real"?Qe:""}));_[t].images.splice(m+1,0,...ls)}l("sub_albums",_)}})]})]})]})},m))})]})]})]},t))})]}),e[120]=Ve,e[121]=Be,e[122]=He,e[123]=a.has_sub_albums,e[124]=a.sub_albums,e[125]=Oe,e[126]=Le,e[127]=l,e[128]=x,e[129]=N,e[130]=se,e[131]=S,e[132]=J):J=e[132];let K;e[133]!==Ue||e[134]!==$e||e[135]!==a.has_sub_albums||e[136]!==a.images||e[137]!==p||e[138]!==v||e[139]!==Xe||e[140]!==l||e[141]!==w?(K=!a.has_sub_albums&&s.jsxs(Y,{children:[s.jsx(Me,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Pe,{children:"Images"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-2 py-1",children:[s.jsx(u,{className:"text-xs",children:"Multi →"}),s.jsxs("select",{className:"text-xs bg-transparent outline-none",value:p,onChange:i=>es(i.target.value),children:[s.jsx("option",{value:"real",children:"Real IDs"}),s.jsx("option",{value:"virtual",children:"Virtual IDs"})]})]}),s.jsx(d,{multiple:!0,label:"Pick Images (multi)",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:$e}),s.jsxs(h,{type:"button",onClick:Ue,size:"sm",children:[s.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]})}),s.jsx(Z,{className:"space-y-4",children:a.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet. Use “Pick Images (multi)” to add many at once, or click “Add Image”."}):a.images.map((i,t)=>s.jsx(Y,{children:s.jsxs(Z,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",t+1]}),s.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>Xe(t),children:s.jsx(We,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Virtual Image ID"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{value:i.virtual_image_id,onChange:r=>w(t,"virtual_image_id",r.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",onPick:r=>w(t,"virtual_image_id",r)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{children:"Real Image ID"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(g,{value:i.real_image_id,onChange:r=>w(t,"real_image_id",r.target.value),placeholder:"Optional"}),s.jsx(d,{label:"Pick",mimeTypes:["image/jpeg","image/png","image/webp"],onPick:r=>w(t,"real_image_id",r)}),s.jsxs("div",{className:"flex items-center gap-1 rounded-md border px-2 py-1",children:[s.jsx(u,{className:"text-[10px]",children:"Multi →"}),s.jsxs("select",{className:"text-[10px] bg-transparent outline-none",value:v,onChange:r=>ss(r.target.value),children:[s.jsx("option",{value:"real",children:"Real"}),s.jsx("option",{value:"virtual",children:"Virtual"})]})]}),s.jsx(d,{multiple:!0,label:"Multi",mimeTypes:["image/jpeg","image/png","image/webp"],onPickMany:r=>{if(!r.length)return;const m=r[0],c=r.slice(1),o=[...a.images];if(v==="real"?o[t].real_image_id=m:o[t].virtual_image_id=m,c.length){const ke=c.map(_=>({virtual_image_id:v==="virtual"?_:"",real_image_id:v==="real"?_:""}));o.splice(t+1,0,...ke)}l("images",o)}})]})]})]})},t))})]}),e[133]=Ue,e[134]=$e,e[135]=a.has_sub_albums,e[136]=a.images,e[137]=p,e[138]=v,e[139]=Xe,e[140]=l,e[141]=w,e[142]=K):K=e[142];let we;e[143]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(h,{type:"button",variant:"outline",onClick:ns,children:"Cancel"}),e[143]=we):we=e[143];const Je=te?"Updating...":"Update Album";let Q;e[144]!==te||e[145]!==Je?(Q=s.jsxs("div",{className:"flex justify-end gap-2",children:[we,s.jsx(h,{type:"submit",disabled:te,children:Je})]}),e[144]=te,e[145]=Je,e[146]=Q):Q=e[146];let W;e[147]!==Ge||e[148]!==q||e[149]!==J||e[150]!==K||e[151]!==Q?(W=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[_e,s.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[q,J,K,Q]})]}),e[147]=Ge,e[148]=q,e[149]=J,e[150]=K,e[151]=Q,e[152]=W):W=e[152];let Ce;return e[153]!==C||e[154]!==W?(Ce=s.jsxs(ms,{breadcrumbs:Ze,children:[C,W]}),e[153]=C,e[154]=W,e[155]=Ce):Ce=e[155],Ce}function ns(){return window.history.back()}function us(){return"real"}function os(De){return[...De,"real"]}function ds(){return"real"}export{ks as default};
